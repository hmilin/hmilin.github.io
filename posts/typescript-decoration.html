<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Meiling&#x27;s Blog</title><meta name="description" content="meilingçš„åšå®¢"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/275b2a15ad29278d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/275b2a15ad29278d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/be3b6285a2614a27.css" as="style"/><link rel="stylesheet" href="/_next/static/css/be3b6285a2614a27.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-a85322f027b40e20.js" defer=""></script><script src="/_next/static/chunks/main-6c11f3d61c45c1c1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ab4c043ec570de8c.js" defer=""></script><script src="/_next/static/chunks/196-32419b2dc902ac8d.js" defer=""></script><script src="/_next/static/chunks/927-f194a212e80173e6.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-ff83de698e35108e.js" defer=""></script><script src="/_next/static/2XlT3rGw8n9OHW1k7dVgT/_buildManifest.js" defer=""></script><script src="/_next/static/2XlT3rGw8n9OHW1k7dVgT/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Layout_container__XDtoS"><header class="Header_header__aO32P"><div class="Header_mobileNav__x8dOm"><div class="Header_menuIcon__zsaJW"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M120-240v-80h720v80zm0-200v-80h720v80zm0-200v-80h720v80z"></path></svg></div><a class="Header_searchBtn__DiCC5" href="/search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580t75.5-184.5T380-840t184.5 75.5T640-580q0 44-14 83t-38 69l252 252zM380-400q75 0 127.5-52.5T560-580t-52.5-127.5T380-760t-127.5 52.5T200-580t52.5 127.5T380-400"></path></svg></a></div><nav class="Header_nav__wk8Zc"><div class="Header_closeIcon__TBNuf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224z"></path></svg></div><a class="Header_searchBtn__DiCC5" href="/search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580t75.5-184.5T380-840t184.5 75.5T640-580q0 44-14 83t-38 69l252 252zM380-400q75 0 127.5-52.5T560-580t-52.5-127.5T380-760t-127.5 52.5T200-580t52.5 127.5T380-400"></path></svg></a><a class="" href="/"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M200-160v-366L88-440l-48-64 440-336 160 122v-82h120v174l160 122-48 64-112-86v366H520v-240h-80v240zm80-80h80v-240h240v240h80v-347L480-739 280-587zm120-319h160q0-32-24-52.5T480-632t-56 20.5-24 52.5m-40 319v-240h240v240-240H360z"></path></svg></div><div class="Header_title__BTC6R">é¦–é¡µ</div></a><a class="" href="/category/native"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M200-640v440h560v-440H640v320l-160-80-160 80v-320zm0 520q-33 0-56.5-23.5T120-200v-499q0-14 4.5-27t13.5-24l50-61q11-14 27.5-21.5T250-840h460q18 0 34.5 7.5T772-811l50 61q9 11 13.5 24t4.5 27v499q0 33-23.5 56.5T760-120zm16-600h528l-34-40H250zm184 80v190l80-40 80 40v-190zm-200 0h560z"></path></svg></div><div class="Header_title__BTC6R">åŸç”ŸåŸºç¡€</div></a><a class="" href="/category/framework"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M400-400h160v-80H400zm0-120h320v-80H400zm0-120h320v-80H400zm-80 400q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240zm0-80h480v-480H320zM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80zm160-720v480z"></path></svg></div><div class="Header_title__BTC6R">æ¡†æ¶ç›¸å…³</div></a><a class="" href="/category/tool"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="m620-284 56-56q6-6 6-14t-6-14L540-505q4-11 6-22t2-25q0-57-40.5-97.5T410-690q-17 0-34 4.5T343-673l94 94-56 56-94-94q-8 16-12.5 33t-4.5 34q0 57 40.5 97.5T408-412q13 0 24.5-2t22.5-6l137 136q6 6 14 6t14-6M480-80q-83 0-156-31.5T197-197t-85.5-127T80-480t31.5-156T197-763t127-85.5T480-880t156 31.5T763-763t85.5 127T880-480t-31.5 156T763-197t-127 85.5T480-80m0-80q134 0 227-93t93-227-93-227-227-93-227 93-93 227 93 227 227 93m0-320"></path></svg></div><div class="Header_title__BTC6R">å·¥å…·ä½¿ç”¨</div></a><a class="" href="/about"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M360-390q-21 0-35.5-14.5T310-440t14.5-35.5T360-490t35.5 14.5T410-440t-14.5 35.5T360-390m240 0q-21 0-35.5-14.5T550-440t14.5-35.5T600-490t35.5 14.5T650-440t-14.5 35.5T600-390M480-160q134 0 227-93t93-227q0-24-3-46.5T786-570q-21 5-42 7.5t-44 2.5q-91 0-172-39T390-708q-32 78-91.5 135.5T160-486v6q0 134 93 227t227 93m0 80q-83 0-156-31.5T197-197t-85.5-127T80-480t31.5-156T197-763t127-85.5T480-880t156 31.5T763-763t85.5 127T880-480t-31.5 156T763-197t-127 85.5T480-80m-54-715q42 70 114 112.5T700-640q14 0 27-1.5t27-3.5q-42-70-114-112.5T480-800q-14 0-27 1.5t-27 3.5M177-581q51-29 89-75t57-103q-51 29-89 75t-57 103m146-178"></path></svg></div><div class="Header_title__BTC6R">å…³äº</div></a></nav></header><div><main><div class="Layout_cover__vC5GW"><div><h1>TypeScript è£…é¥°å™¨ä½¿ç”¨</h1><p>TypeScript è£…é¥°å™¨ä½¿ç”¨</p><div>2021-09-24 19:00:00</div></div></div><div class="content-container"><h1>TypeScript è£…é¥°å™¨ä½¿ç”¨</h1>
<blockquote>
<p>è£…é¥°å™¨æ¨¡å¼ï¼Œåˆåè£…é¥°è€…æ¨¡å¼ã€‚å®ƒçš„å®šä¹‰æ˜¯â€œåœ¨ä¸æ”¹å˜åŸå¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å¯¹å…¶è¿›è¡ŒåŒ…è£…æ‹“å±•ï¼Œä½¿åŸæœ‰å¯¹è±¡å¯ä»¥æ»¡è¶³ç”¨æˆ·çš„æ›´å¤æ‚éœ€æ±‚â€ã€‚</p>
</blockquote>
<p>æ ¹æ®è£…é¥°å¯¹è±¡åˆ†ç±»å¸¸è§çš„è£…é¥°å™¨æœ‰ä¸‰ç§ï¼Œç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨å’Œå‡½æ•°è£…é¥°å™¨ã€‚</p>
<h2>ä½¿ç”¨è£…é¥°å™¨å·¥å‚ç”Ÿæˆè£…é¥°å™¨</h2>
<p>å®šä¹‰ä¸€ä¸ªè£…é¥°å™¨å·¥å‚æ ¼å¼å¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<p>å…¶å®å°±æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¦ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹è£…é¥°å¯¹è±¡è¿›è¡Œå¤„ç†ä¹‹åå°†ç»“æœè¿”å›ã€‚</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#8fa1b3">name</span><span class="hljs-function"> (</span><span class="hljs-function">) </span><span>{
</span><span>    </span><span style="color:#b48ead">return</span><span> </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">target:Â IConfirmableDirective, propertyKey:Â string, descriptor:Â PropertyDescriptor</span><span class="hljs-function">) </span><span>{
</span><span>            </span><span style="color:#65737e">// TODO å¯¹è£…é¥°å¯¹è±¡çš„å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†ç»“æœ</span><span>
</span>    }
<!-- -->}
</code></pre>
<p>ç¬¬ä¸€å±‚å‡½æ•°å¯ä»¥ä¼ å…¥è£…é¥°å™¨å‚æ•°</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#8fa1b3">name</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">value: string</span><span class="hljs-function">) </span><span>{
</span><span>    </span><span style="color:#b48ead">return</span><span> </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">(</span><span class="hljs-function">) </span><span>{}
</span>}
<span></span><span style="color:#65737e">// å³æ˜¯è¿™ä¹ˆä½¿ç”¨</span><span>
</span><span>@name(</span><span style="color:#a3be8c">&#x27;111&#x27;</span><span>) ...
</span></code></pre>
<p>ç¬¬äºŒå±‚å‡½æ•°çš„å‚æ•°å³æ˜¯è£…é¥°å¯¹è±¡çš„æºæ•°æ®</p>
<ul>
<li>target:  è£…é¥°ç±»çš„æ„é€ å‡½æ•°</li>
<li>propertyKey: å±æ€§çš„keyå€¼</li>
<li>descriptor: è£…é¥°å¯¹è±¡çš„PropertyDescriptor</li>
</ul>
<h2>è£…é¥°å™¨ä½¿ç”¨ç¤ºä¾‹</h2>
<p>åˆ é™¤æ“ä½œäºŒæ¬¡ç¡®è®¤æ˜¯æ—¥å¸¸å¼€å‘ä¸­å¾ˆå¸¸è§çš„åœºæ™¯ï¼Œæ­£å¸¸çš„å®ç°æ€è·¯æ˜¯ç‚¹å‡»åˆ é™¤æŒ‰é’®æ—¶æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„å†…å®¹åŒ…æ‹¬æ‰“å¼€ä¸€ä¸ªç¡®è®¤æ¡†ï¼Œå®šä¹‰å¥½å›è°ƒå‡½æ•°ï¼Œç­‰äºŒæ¬¡ç¡®å®šåæ‰§è¡Œå›è°ƒã€‚å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span class="hljs-function" style="color:#8fa1b3">delete</span><span class="hljs-function">(</span><span class="hljs-function">)</span><span> {
</span><span>   </span><span style="color:#d08770">this</span><span>.noticeService.dialog({
</span>Â Â Â Â Â Â title,
<span>Â Â Â Â Â Â </span><span class="hljs-attr">theme</span><span>:Â </span><span style="color:#a3be8c">&#x27;error&#x27;</span><span>,
</span><span>Â Â Â Â Â Â </span><span class="hljs-attr">body</span><span>:Â description,
</span><span>Â Â Â Â Â Â </span><span class="hljs-attr">callback</span><span>:Â </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">ret:Â boolean</span><span class="hljs-function">)Â =&gt;</span><span>Â {
</span><span>Â Â Â Â Â Â Â Â </span><span style="color:#b48ead">if</span><span>Â (!ret)Â {
</span><span>Â Â Â Â Â Â Â Â Â Â </span><span style="color:#b48ead">return</span><span>;
</span>Â Â Â Â Â Â Â Â }
<span>Â Â Â Â Â Â Â Â </span><span style="color:#65737e">// æ‰§è¡Œåˆ é™¤å‡½æ•°</span><span>
</span>Â Â Â Â Â Â },
<!-- -->Â Â Â Â });
<!-- -->}
</code></pre>
<p>å¦‚æœä½¿ç”¨è£…é¥°å™¨æ”¹å†™ï¼Œåªéœ€è¦åœ¨å‡½æ•°å‰é¢åŠ ä¸ªè£…é¥°å™¨ï¼Œä¸éœ€è¦ä¿®æ”¹å‡½æ•°æœ¬èº«ï¼Œå¹¶ä¸”çœ‹èµ·æ¥æ›´ä¼˜é›…ç®€æ´ã€‚è°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>Â @deleteConfirm(</span><span style="color:#a3be8c">&#x27;åˆ é™¤åº”ç”¨&#x27;</span><span>,Â </span><span style="color:#a3be8c">&#x27;ç¡®å®šåˆ é™¤åº”ç”¨ï¼Ÿ&#x27;</span><span>)
</span><span> </span><span class="hljs-function" style="color:#8fa1b3">delete</span><span class="hljs-function">(</span><span class="hljs-function">)</span><span> {
</span><span>     </span><span style="color:#65737e">// åˆ é™¤æ“ä½œ </span><span>
</span> }
</code></pre>
<p>è£…é¥°å™¨å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>interfaceÂ IConfirmableDirectiveÂ {
</span><span>Â Â </span><span class="hljs-attr">injector</span><span>:Â Injector;
</span><span>Â Â ngOnInit?:Â </span><span style="color:#d08770">Function</span><span>;
</span>}
<span></span><span style="color:#b48ead">export</span><span>Â </span><span style="color:#b48ead">default</span><span>Â </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">Â </span><span class="hljs-function" style="color:#8fa1b3">deleteConfirm</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">title:Â string,Â description:Â string</span><span class="hljs-function">)Â </span><span>{
</span><span>Â Â </span><span style="color:#b48ead">return</span><span>Â </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">Â (</span><span class="hljs-function" style="color:#d08770">
</span><span class="hljs-function" style="color:#d08770">Â Â Â Â target:Â IConfirmableDirective,
</span><span class="hljs-function" style="color:#d08770">Â Â Â Â key:Â string,
</span><span class="hljs-function" style="color:#d08770">Â Â Â Â descriptor:Â PropertyDescriptor
</span><span class="hljs-function" style="color:#d08770">Â Â </span><span class="hljs-function">)Â </span><span>{
</span><span>Â Â Â Â </span><span style="color:#b48ead">const</span><span>Â originalMethodÂ =Â descriptor.value;
</span><span>Â Â Â Â </span><span style="color:#b48ead">const</span><span>Â originNgOninitÂ =Â target.ngOnInit;
</span><span>Â Â Â Â </span><span style="color:#b48ead">let</span><span>Â noticeService:Â NoticeService;
</span><span>Â Â Â Â target.ngOnInitÂ =Â </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">Â (</span><span class="hljs-function" style="color:#d08770">this</span><span class="hljs-function" style="color:#d08770">:Â IConfirmableDirective</span><span class="hljs-function">)Â </span><span>{
</span><span>Â Â Â Â Â Â originNgOninitÂ &amp;&amp;Â originNgOninit.apply(</span><span style="color:#d08770">this</span><span>);
</span><span>Â Â Â Â Â Â noticeServiceÂ =Â </span><span style="color:#d08770">this</span><span>.injector.get(NoticeService);
</span>Â Â Â Â };
<span>Â Â Â Â descriptor.valueÂ =Â </span><span style="color:#b48ead">async</span><span>Â </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">Â (</span><span class="hljs-function" style="color:#d08770">...args:Â any[]</span><span class="hljs-function">)Â </span><span>{
</span><span>Â Â Â Â Â Â </span><span style="color:#b48ead">let</span><span>Â confirmÂ =Â </span><span style="color:#b48ead">new</span><span>Â </span><span style="color:#d08770">Promise</span><span>&lt;boolean&gt;(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">resolve</span><span class="hljs-function">)Â =&gt;</span><span>Â {
</span>Â Â Â Â Â Â Â Â noticeService.dialog({
<!-- -->Â Â Â Â Â Â Â Â Â Â title,
<span>Â Â Â Â Â Â Â Â Â Â </span><span class="hljs-attr">theme</span><span>:Â </span><span style="color:#a3be8c">&#x27;error&#x27;</span><span>,
</span><span>Â Â Â Â Â Â Â Â Â Â </span><span class="hljs-attr">body</span><span>:Â description,
</span><span>Â Â Â Â Â Â Â Â Â Â </span><span class="hljs-attr">callback</span><span>:Â </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">ret:Â boolean</span><span class="hljs-function">)Â =&gt;</span><span>Â {
</span><span>Â Â Â Â Â Â Â Â Â Â Â Â </span><span style="color:#b48ead">if</span><span>Â (!ret)Â {
</span><span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â resolve(</span><span style="color:#d08770">false</span><span>);
</span><span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span><span style="color:#b48ead">return</span><span>;
</span>Â Â Â Â Â Â Â Â Â Â Â Â }
<span>Â Â Â Â Â Â Â Â Â Â Â Â resolve(</span><span style="color:#d08770">true</span><span>);
</span>Â Â Â Â Â Â Â Â Â Â },
<!-- -->Â Â Â Â Â Â Â Â });
<!-- -->Â Â Â Â Â Â });
<span>Â Â Â Â Â Â </span><span style="color:#b48ead">let</span><span>Â resÂ =Â </span><span style="color:#b48ead">await</span><span>Â confirm;
</span><span>Â Â Â Â Â Â </span><span style="color:#b48ead">if</span><span>Â (res)Â {
</span><span>Â Â Â Â Â Â Â Â </span><span style="color:#b48ead">const</span><span>Â resultÂ =Â originalMethod.apply(</span><span style="color:#d08770">this</span><span>,Â args);
</span><span>Â Â Â Â Â Â Â Â </span><span style="color:#b48ead">return</span><span>Â result;
</span>Â Â Â Â Â Â }
<!-- -->Â Â Â Â };
<span>Â Â Â Â </span><span style="color:#b48ead">return</span><span>Â descriptor;
</span>Â Â };
<!-- -->}
</code></pre>
<h2>Ng-Zorroä¸­çš„è£…é¥°å™¨</h2>
<p>ä¸Šé¢æˆ‘ä»¬ç®€å•å®ç°äº†ä¸€ä¸ªè£…é¥°å™¨å·¥å‚ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šä»£ç æ˜¯æ¯æ¬¡å®šä¹‰è£…é¥°å™¨çš„æ—¶å€™éƒ½è¦é‡å¤å†™çš„ã€‚åœ¨Ng-Zorroä¸­ï¼Œå°±è¢«æå–ä¸ºä¸€ä¸ªå…¬å…±å‡½æ•°ï¼Œé¿å…äº†å¾ˆå¤šé‡å¤çš„ä»£ç ï¼Œå¹¶ä¸”é¿å…äº†è£…é¥°å™¨å‘½åé‡å¤ã€‚</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">Â </span><span class="hljs-function" style="color:#8fa1b3">propDecoratorFactory</span><span class="hljs-function">&lt;</span><span class="hljs-function" style="color:#8fa1b3">T</span><span class="hljs-function">,Â </span><span class="hljs-function" style="color:#8fa1b3">D</span><span class="hljs-function">&gt;(</span><span class="hljs-function" style="color:#d08770">
</span><span class="hljs-function" style="color:#d08770">Â Â name:Â string,
</span><span class="hljs-function" style="color:#d08770">Â Â fallback:Â (v:Â T)Â =&gt;Â D
</span><span class="hljs-function" style="color:#d08770"></span><span class="hljs-function">):Â (</span><span class="hljs-function" style="color:#d08770">target:Â NzSafeAny,Â propName:Â string</span><span class="hljs-function">)Â =&gt;Â </span><span class="hljs-function" style="color:#8fa1b3">void</span><span class="hljs-function">Â </span><span>{
</span><span>Â Â </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">Â </span><span class="hljs-function" style="color:#8fa1b3">propDecorator</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">
</span><span class="hljs-function" style="color:#d08770">Â Â Â Â target:Â NzSafeAny,
</span><span class="hljs-function" style="color:#d08770">Â Â Â Â propName:Â string,
</span><span class="hljs-function" style="color:#d08770">Â Â Â Â originalDescriptor?:Â TypedPropertyDescriptor&lt;NzSafeAny&gt;
</span><span class="hljs-function" style="color:#d08770">Â Â </span><span class="hljs-function">):Â </span><span class="hljs-function" style="color:#8fa1b3">NzSafeAny</span><span class="hljs-function">Â </span><span>{
</span><span>Â Â Â Â </span><span style="color:#b48ead">const</span><span>Â privatePropNameÂ =Â </span><span style="color:#a3be8c">`$$__zorroPropDecorator__</span><span class="hljs-subst" style="color:#a3be8c">${propName}</span><span style="color:#a3be8c">`</span><span>;
</span><span>Â Â Â Â </span><span style="color:#b48ead">if</span><span>Â (</span><span style="color:#d08770">Object</span><span>.prototype.hasOwnProperty.call(target,Â privatePropName))Â {
</span><span>Â Â Â Â Â Â warn(</span><span style="color:#a3be8c">`TheÂ propÂ &quot;</span><span class="hljs-subst" style="color:#a3be8c">${privatePropName}</span><span style="color:#a3be8c">&quot;Â isÂ alreadyÂ exist,Â itÂ willÂ beÂ overridedÂ byÂ </span><span class="hljs-subst" style="color:#a3be8c">${name}</span><span style="color:#a3be8c">Â decorator.`</span><span>);
</span>Â Â Â Â }
<span>Â Â Â Â </span><span style="color:#d08770">Object</span><span>.defineProperty(target,Â privatePropName,Â {
</span><span>Â Â Â Â Â Â </span><span class="hljs-attr">configurable</span><span>:Â </span><span style="color:#d08770">true</span><span>,
</span><span>Â Â Â Â Â Â </span><span class="hljs-attr">writable</span><span>:Â </span><span style="color:#d08770">true</span><span>
</span>Â Â Â Â });
<span>Â Â Â Â </span><span style="color:#b48ead">return</span><span>Â {
</span>Â Â Â Â Â Â get():Â stringÂ {
<span>Â Â Â Â Â Â Â Â </span><span style="color:#b48ead">return</span><span>Â originalDescriptorÂ &amp;&amp;Â originalDescriptor.get
</span><span>Â Â Â Â Â Â Â Â Â Â ?Â originalDescriptor.get.bind(</span><span style="color:#d08770">this</span><span>)()
</span><span>Â Â Â Â Â Â Â Â Â Â :Â </span><span style="color:#d08770">this</span><span>[privatePropName];
</span>Â Â Â Â Â Â },
<span>Â Â Â Â Â Â set(value:Â T):Â </span><span style="color:#b48ead">void</span><span>Â {
</span><span>Â Â Â Â Â Â Â Â </span><span style="color:#b48ead">if</span><span>Â (originalDescriptorÂ &amp;&amp;Â originalDescriptor.set)Â {
</span><span>Â Â Â Â Â Â Â Â Â Â originalDescriptor.set.bind(</span><span style="color:#d08770">this</span><span>)(fallback(value));
</span>Â Â Â Â Â Â Â Â }
<span>Â Â Â Â Â Â Â Â </span><span style="color:#d08770">this</span><span>[privatePropName]Â =Â fallback(value);
</span>Â Â Â Â Â Â }
<!-- -->Â Â Â Â };
<!-- -->Â Â }
<span>Â Â </span><span style="color:#b48ead">return</span><span>Â propDecorator;
</span>}
</code></pre>
<p>è¿™æ ·ï¼Œå£°æ˜ä¸€ä¸ªè£…é¥°å™¨ä¼šå˜å¾—æ›´ç®€æ´ï¼š</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#b48ead">export</span><span>Â </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function">Â </span><span class="hljs-function" style="color:#8fa1b3">InputBoolean</span><span class="hljs-function">(</span><span class="hljs-function">):Â </span><span class="hljs-function" style="color:#8fa1b3">NzSafeAny</span><span class="hljs-function">Â </span><span>{
</span><span>Â Â </span><span style="color:#b48ead">return</span><span>Â propDecoratorFactory(</span><span style="color:#a3be8c">&#x27;InputBoolean&#x27;</span><span>,Â toBoolean);
</span>}
</code></pre>
<h2>å¸¸è§çš„ä¸šåŠ¡åœºæ™¯</h2>
<ul>
<li>å®ç°Reacté«˜é˜¶ç»„ä»¶ã€‚</li>
<li>å¯¹å±æ€§è¿›è¡Œæ ¼å¼è½¬æ¢ï¼Œé€šå¸¸æ ¼å¼åŒ–æ•°æ®æˆ‘ä»¬ä¼šä½¿ç”¨å®šä¹‰å‡½æ•°çš„æ–¹å¼å¯¹æ•°æ®ä¿®æ”¹ç„¶åè¿”å›ï¼Œä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨è£…é¥°å™¨ï¼Œè®©ä»£ç æ›´ä¼˜é›…ä¸€äº›ã€‚</li>
<li>å¯¹å‡½æ•°æ‰§è¡Œä¹‹å‰è¿›è¡Œæ‹¦æˆªï¼Œä¾‹å¦‚ä¸Šé¢çš„åˆ é™¤ç¡®è®¤æ‹¦æˆªã€‚</li>
<li>å¯¹ç±»åŠŸèƒ½çš„æ‰©å±•ï¼Œåœ¨ä¸æ”¹å˜æºä»£ç çš„æƒ…å†µä¸‹å¯¹åŠŸèƒ½æ‰©å±•ï¼Œä½¿ä»£ç æ›´å…·ç»´æŠ¤æ€§ã€‚</li>
</ul></div><div class="content-container"></div></main><footer class="grid place-items-center pb-4"><a href="https://github.com/hmilin" target="_blank" rel="noreferrer noopener">ğŸ˜˜Github</a></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    blockquote: \"blockquote\",\n    p: \"p\",\n    h2: \"h2\",\n    pre: \"pre\",\n    code: \"code\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"TypeScript è£…é¥°å™¨ä½¿ç”¨\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"è£…é¥°å™¨æ¨¡å¼ï¼Œåˆåè£…é¥°è€…æ¨¡å¼ã€‚å®ƒçš„å®šä¹‰æ˜¯â€œåœ¨ä¸æ”¹å˜åŸå¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å¯¹å…¶è¿›è¡ŒåŒ…è£…æ‹“å±•ï¼Œä½¿åŸæœ‰å¯¹è±¡å¯ä»¥æ»¡è¶³ç”¨æˆ·çš„æ›´å¤æ‚éœ€æ±‚â€ã€‚\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ ¹æ®è£…é¥°å¯¹è±¡åˆ†ç±»å¸¸è§çš„è£…é¥°å™¨æœ‰ä¸‰ç§ï¼Œç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨å’Œå‡½æ•°è£…é¥°å™¨ã€‚\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ä½¿ç”¨è£…é¥°å™¨å·¥å‚ç”Ÿæˆè£…é¥°å™¨\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å®šä¹‰ä¸€ä¸ªè£…é¥°å™¨å·¥å‚æ ¼å¼å¤§æ¦‚å¦‚ä¸‹ï¼š\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å…¶å®å°±æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¦ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹è£…é¥°å¯¹è±¡è¿›è¡Œå¤„ç†ä¹‹åå°†ç»“æœè¿”å›ã€‚\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"function name () {\\n    return function(target:Â IConfirmableDirective, propertyKey:Â string, descriptor:Â PropertyDescriptor) {\\n            // TODO å¯¹è£…é¥°å¯¹è±¡çš„å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†ç»“æœ\\n    }\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ç¬¬ä¸€å±‚å‡½æ•°å¯ä»¥ä¼ å…¥è£…é¥°å™¨å‚æ•°\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"function name(value: string) {\\n    return function() {}\\n}\\n// å³æ˜¯è¿™ä¹ˆä½¿ç”¨\\n@name('111') ...\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ç¬¬äºŒå±‚å‡½æ•°çš„å‚æ•°å³æ˜¯è£…é¥°å¯¹è±¡çš„æºæ•°æ®\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"target:  è£…é¥°ç±»çš„æ„é€ å‡½æ•°\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"propertyKey: å±æ€§çš„keyå€¼\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"descriptor: è£…é¥°å¯¹è±¡çš„PropertyDescriptor\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"è£…é¥°å™¨ä½¿ç”¨ç¤ºä¾‹\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"åˆ é™¤æ“ä½œäºŒæ¬¡ç¡®è®¤æ˜¯æ—¥å¸¸å¼€å‘ä¸­å¾ˆå¸¸è§çš„åœºæ™¯ï¼Œæ­£å¸¸çš„å®ç°æ€è·¯æ˜¯ç‚¹å‡»åˆ é™¤æŒ‰é’®æ—¶æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„å†…å®¹åŒ…æ‹¬æ‰“å¼€ä¸€ä¸ªç¡®è®¤æ¡†ï¼Œå®šä¹‰å¥½å›è°ƒå‡½æ•°ï¼Œç­‰äºŒæ¬¡ç¡®å®šåæ‰§è¡Œå›è°ƒã€‚å¤§è‡´å¦‚ä¸‹ï¼š\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"delete() {\\n   this.noticeService.dialog({\\nÂ Â Â Â Â Â title,\\nÂ Â Â Â Â Â theme:Â 'error',\\nÂ Â Â Â Â Â body:Â description,\\nÂ Â Â Â Â Â callback:Â (ret:Â boolean)Â =\u003eÂ {\\nÂ Â Â Â Â Â Â Â ifÂ (!ret)Â {\\nÂ Â Â Â Â Â Â Â Â Â return;\\nÂ Â Â Â Â Â Â Â }\\nÂ Â Â Â Â Â Â Â // æ‰§è¡Œåˆ é™¤å‡½æ•°\\nÂ Â Â Â Â Â },\\nÂ Â Â Â });\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å¦‚æœä½¿ç”¨è£…é¥°å™¨æ”¹å†™ï¼Œåªéœ€è¦åœ¨å‡½æ•°å‰é¢åŠ ä¸ªè£…é¥°å™¨ï¼Œä¸éœ€è¦ä¿®æ”¹å‡½æ•°æœ¬èº«ï¼Œå¹¶ä¸”çœ‹èµ·æ¥æ›´ä¼˜é›…ç®€æ´ã€‚è°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼š\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"Â @deleteConfirm('åˆ é™¤åº”ç”¨',Â 'ç¡®å®šåˆ é™¤åº”ç”¨ï¼Ÿ')\\n delete() {\\n     // åˆ é™¤æ“ä½œ \\n }\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è£…é¥°å™¨å®ç°ä»£ç å¦‚ä¸‹ï¼š\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"interfaceÂ IConfirmableDirectiveÂ {\\nÂ Â injector:Â Injector;\\nÂ Â ngOnInit?:Â Function;\\n}\\nexportÂ defaultÂ functionÂ deleteConfirm(title:Â string,Â description:Â string)Â {\\nÂ Â returnÂ functionÂ (\\nÂ Â Â Â target:Â IConfirmableDirective,\\nÂ Â Â Â key:Â string,\\nÂ Â Â Â descriptor:Â PropertyDescriptor\\nÂ Â )Â {\\nÂ Â Â Â constÂ originalMethodÂ =Â descriptor.value;\\nÂ Â Â Â constÂ originNgOninitÂ =Â target.ngOnInit;\\nÂ Â Â Â letÂ noticeService:Â NoticeService;\\nÂ Â Â Â target.ngOnInitÂ =Â functionÂ (this:Â IConfirmableDirective)Â {\\nÂ Â Â Â Â Â originNgOninitÂ \u0026\u0026Â originNgOninit.apply(this);\\nÂ Â Â Â Â Â noticeServiceÂ =Â this.injector.get(NoticeService);\\nÂ Â Â Â };\\nÂ Â Â Â descriptor.valueÂ =Â asyncÂ functionÂ (...args:Â any[])Â {\\nÂ Â Â Â Â Â letÂ confirmÂ =Â newÂ Promise\u003cboolean\u003e((resolve)Â =\u003eÂ {\\nÂ Â Â Â Â Â Â Â noticeService.dialog({\\nÂ Â Â Â Â Â Â Â Â Â title,\\nÂ Â Â Â Â Â Â Â Â Â theme:Â 'error',\\nÂ Â Â Â Â Â Â Â Â Â body:Â description,\\nÂ Â Â Â Â Â Â Â Â Â callback:Â (ret:Â boolean)Â =\u003eÂ {\\nÂ Â Â Â Â Â Â Â Â Â Â Â ifÂ (!ret)Â {\\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â resolve(false);\\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â return;\\nÂ Â Â Â Â Â Â Â Â Â Â Â }\\nÂ Â Â Â Â Â Â Â Â Â Â Â resolve(true);\\nÂ Â Â Â Â Â Â Â Â Â },\\nÂ Â Â Â Â Â Â Â });\\nÂ Â Â Â Â Â });\\nÂ Â Â Â Â Â letÂ resÂ =Â awaitÂ confirm;\\nÂ Â Â Â Â Â ifÂ (res)Â {\\nÂ Â Â Â Â Â Â Â constÂ resultÂ =Â originalMethod.apply(this,Â args);\\nÂ Â Â Â Â Â Â Â returnÂ result;\\nÂ Â Â Â Â Â }\\nÂ Â Â Â };\\nÂ Â Â Â returnÂ descriptor;\\nÂ Â };\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Ng-Zorroä¸­çš„è£…é¥°å™¨\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ä¸Šé¢æˆ‘ä»¬ç®€å•å®ç°äº†ä¸€ä¸ªè£…é¥°å™¨å·¥å‚ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šä»£ç æ˜¯æ¯æ¬¡å®šä¹‰è£…é¥°å™¨çš„æ—¶å€™éƒ½è¦é‡å¤å†™çš„ã€‚åœ¨Ng-Zorroä¸­ï¼Œå°±è¢«æå–ä¸ºä¸€ä¸ªå…¬å…±å‡½æ•°ï¼Œé¿å…äº†å¾ˆå¤šé‡å¤çš„ä»£ç ï¼Œå¹¶ä¸”é¿å…äº†è£…é¥°å™¨å‘½åé‡å¤ã€‚\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"functionÂ propDecoratorFactory\u003cT,Â D\u003e(\\nÂ Â name:Â string,\\nÂ Â fallback:Â (v:Â T)Â =\u003eÂ D\\n):Â (target:Â NzSafeAny,Â propName:Â string)Â =\u003eÂ voidÂ {\\nÂ Â functionÂ propDecorator(\\nÂ Â Â Â target:Â NzSafeAny,\\nÂ Â Â Â propName:Â string,\\nÂ Â Â Â originalDescriptor?:Â TypedPropertyDescriptor\u003cNzSafeAny\u003e\\nÂ Â ):Â NzSafeAnyÂ {\\nÂ Â Â Â constÂ privatePropNameÂ =Â `$$__zorroPropDecorator__${propName}`;\\nÂ Â Â Â ifÂ (Object.prototype.hasOwnProperty.call(target,Â privatePropName))Â {\\nÂ Â Â Â Â Â warn(`TheÂ propÂ \\\"${privatePropName}\\\"Â isÂ alreadyÂ exist,Â itÂ willÂ beÂ overridedÂ byÂ ${name}Â decorator.`);\\nÂ Â Â Â }\\nÂ Â Â Â Object.defineProperty(target,Â privatePropName,Â {\\nÂ Â Â Â Â Â configurable:Â true,\\nÂ Â Â Â Â Â writable:Â true\\nÂ Â Â Â });\\nÂ Â Â Â returnÂ {\\nÂ Â Â Â Â Â get():Â stringÂ {\\nÂ Â Â Â Â Â Â Â returnÂ originalDescriptorÂ \u0026\u0026Â originalDescriptor.get\\nÂ Â Â Â Â Â Â Â Â Â ?Â originalDescriptor.get.bind(this)()\\nÂ Â Â Â Â Â Â Â Â Â :Â this[privatePropName];\\nÂ Â Â Â Â Â },\\nÂ Â Â Â Â Â set(value:Â T):Â voidÂ {\\nÂ Â Â Â Â Â Â Â ifÂ (originalDescriptorÂ \u0026\u0026Â originalDescriptor.set)Â {\\nÂ Â Â Â Â Â Â Â Â Â originalDescriptor.set.bind(this)(fallback(value));\\nÂ Â Â Â Â Â Â Â }\\nÂ Â Â Â Â Â Â Â this[privatePropName]Â =Â fallback(value);\\nÂ Â Â Â Â Â }\\nÂ Â Â Â };\\nÂ Â }\\nÂ Â returnÂ propDecorator;\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¿™æ ·ï¼Œå£°æ˜ä¸€ä¸ªè£…é¥°å™¨ä¼šå˜å¾—æ›´ç®€æ´ï¼š\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"exportÂ functionÂ InputBoolean():Â NzSafeAnyÂ {\\nÂ Â returnÂ propDecoratorFactory('InputBoolean',Â toBoolean);\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"å¸¸è§çš„ä¸šåŠ¡åœºæ™¯\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"å®ç°Reacté«˜é˜¶ç»„ä»¶ã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"å¯¹å±æ€§è¿›è¡Œæ ¼å¼è½¬æ¢ï¼Œé€šå¸¸æ ¼å¼åŒ–æ•°æ®æˆ‘ä»¬ä¼šä½¿ç”¨å®šä¹‰å‡½æ•°çš„æ–¹å¼å¯¹æ•°æ®ä¿®æ”¹ç„¶åè¿”å›ï¼Œä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨è£…é¥°å™¨ï¼Œè®©ä»£ç æ›´ä¼˜é›…ä¸€äº›ã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"å¯¹å‡½æ•°æ‰§è¡Œä¹‹å‰è¿›è¡Œæ‹¦æˆªï¼Œä¾‹å¦‚ä¸Šé¢çš„åˆ é™¤ç¡®è®¤æ‹¦æˆªã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"å¯¹ç±»åŠŸèƒ½çš„æ‰©å±•ï¼Œåœ¨ä¸æ”¹å˜æºä»£ç çš„æƒ…å†µä¸‹å¯¹åŠŸèƒ½æ‰©å±•ï¼Œä½¿ä»£ç æ›´å…·ç»´æŠ¤æ€§ã€‚\"\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"title":"TypeScript è£…é¥°å™¨ä½¿ç”¨","date":"2021-09-24 19:00:00","description":"TypeScript è£…é¥°å™¨ä½¿ç”¨","category":"native"}},"frontMatter":{"title":"TypeScript è£…é¥°å™¨ä½¿ç”¨","date":"2021-09-24 19:00:00","description":"TypeScript è£…é¥°å™¨ä½¿ç”¨","category":"native"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"typescript-decoration"},"buildId":"2XlT3rGw8n9OHW1k7dVgT","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>