<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>è›‹é»„æ´¾ç¢å†°å†°</title><meta name="description" content="è›‹é»„æ´¾ç¢å†°å†°çš„åšå®¢"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/da7f7373972fd13e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/da7f7373972fd13e.css" data-n-g=""/><link rel="preload" href="/_next/static/css/4a0c5542377ce400.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4a0c5542377ce400.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5de4b7d33f2a120c.js" defer=""></script><script src="/_next/static/chunks/framework-3f93186e9f193d1c.js" defer=""></script><script src="/_next/static/chunks/main-44f76ee354cc56e8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-555bc88780b31b18.js" defer=""></script><script src="/_next/static/chunks/118-ff2bc742a0802811.js" defer=""></script><script src="/_next/static/chunks/750-7cea06feb11b219f.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-6ac716b010464765.js" defer=""></script><script src="/_next/static/4t3GX91zvuNjfyiqlqIfW/_buildManifest.js" defer=""></script><script src="/_next/static/4t3GX91zvuNjfyiqlqIfW/_ssgManifest.js" defer=""></script><script src="/_next/static/4t3GX91zvuNjfyiqlqIfW/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_container__CSAqU"><header class="Header_header__Z4YN5"><a href="/">è›‹é»„æ´¾ç¢å†°å†°</a><nav><ul><li><a href="/#posts">æ–‡ç« </a></li><li><a href="/about">å…³äº</a></li></ul></nav></header><main><div class="Layout_banner__0qsJd"><h1>rxjså­¦ä¹ è®°å½•</h1><p>ä»‹ç»rxjsçš„å¸¸ç”¨æ“ä½œç¬¦å’Œä½¿ç”¨åœºæ™¯ã€‚</p><div>2021-03-13 18:53:00</div></div><div class="content-container"><h1>rxjs å­¦ä¹ è®°å½•</h1>
<h3>åŸºç¡€æ¦‚å¿µ</h3>
<ul>
<li>Observable (å¯è§‚å¯Ÿå¯¹è±¡): è¡¨ç¤ºä¸€ä¸ªæ¦‚å¿µï¼Œè¿™ä¸ªæ¦‚å¿µæ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„æœªæ¥å€¼æˆ–äº‹ä»¶çš„é›†åˆã€‚</li>
<li>Observer (è§‚å¯Ÿè€…): ä¸€ä¸ªå›è°ƒå‡½æ•°çš„é›†åˆï¼Œå®ƒçŸ¥é“å¦‚ä½•å»ç›‘å¬ç”± Observable æä¾›çš„å€¼ã€‚</li>
<li>Subscription (è®¢é˜…): è¡¨ç¤º Observable çš„æ‰§è¡Œï¼Œä¸»è¦ç”¨äºå–æ¶ˆ Observable çš„æ‰§è¡Œã€‚</li>
<li>Operators (æ“ä½œç¬¦): é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼çš„çº¯å‡½æ•° (pure function)ï¼Œä½¿ç”¨åƒ mapã€filterã€concatã€flatMap ç­‰è¿™æ ·çš„æ“ä½œç¬¦æ¥å¤„ç†é›†åˆã€‚</li>
<li>Subject (ä¸»ä½“): ç›¸å½“äº EventEmitterï¼Œå¹¶ä¸”æ˜¯å°†å€¼æˆ–äº‹ä»¶å¤šè·¯æ¨é€ç»™å¤šä¸ª Observer çš„å”¯ä¸€æ–¹å¼ã€‚</li>
<li>Schedulers (è°ƒåº¦å™¨): ç”¨æ¥æ§åˆ¶å¹¶å‘å¹¶ä¸”æ˜¯ä¸­å¤®é›†æƒçš„è°ƒåº¦å‘˜ï¼Œå…è®¸æˆ‘ä»¬åœ¨å‘ç”Ÿè®¡ç®—æ—¶è¿›è¡Œåè°ƒï¼Œä¾‹å¦‚ setTimeout æˆ– requestAnimationFrame æˆ–å…¶ä»–ã€‚</li>
</ul>
<h3>å¸¸ç”¨æ“ä½œç¬¦</h3>
<ul>
<li>of: è¿”å›ä¸€ä¸ª observableï¼Œä¾æ¬¡å‘å‡ºä¼ å…¥çš„å€¼</li>
<li>switchMap: ä¼šå–æ¶ˆä¸Šæ¬¡å‘å‡ºçš„ observableï¼Œé€šå¸¸å’Œ interval é…åˆä½¿ç”¨</li>
<li>mergeMap/flatMap: ä¸ map çš„åŒºåˆ«æ˜¯èƒ½å°†è¿”å›ç»“æœæ‰“å¹³ï¼Œè¿”å›ä¸€ä¸ª Observableï¼Œå¯ç”¨äºä¸²è”è¯·æ±‚æ•°æ®</li>
<li>merge: å°†å¤šä¸ª Observable åˆå¹¶ä¸ºä¸€ä¸ª</li>
<li>mergeAll: æ”¶é›†å¹¶è®¢é˜…æ‰€æœ‰ Observable,map + mergeAll === mergeMap</li>
<li>skipWhile: ç¬¦åˆæ¡ä»¶æ—¶è·³è¿‡æœ¬æ¬¡ï¼Œä½†æ˜¯ä¸€æ—¦å‡ºç°ä¸æ»¡è¶³æ¡ä»¶çš„é¡¹ï¼Œåˆ™ä¼šå‘å‡ºæ­¤ä¹‹åçš„æ‰€æœ‰é¡¹</li>
<li>takeWhileï¼šç¬¬ä¸€ä¸ªè¿”å› false æ—¶å®Œæˆ</li>
<li>takeUntil: ä¼ å…¥ä¸€ä¸ª Observableï¼Œå‘å‡ºä¿¡å·æ—¶æ—¶å®Œæˆå½“å‰ Observable</li>
<li>startWith: å¯ä»¥å’Œ interval ä¸€èµ·ä½¿ç”¨ï¼Œå®šä¹‰ç¬¬ä¸€æ¬¡è§¦å‘çš„ delay å‚æ•°</li>
<li>takeï¼šæŒ‡å®šç¬¬å‡ æ¬¡æ‰§è¡Œ</li>
<li>filter: è¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„æ•°æ®é¡¹ï¼Œå’Œ skipWhile ç±»ä¼¼ä½†æ˜¯ä¼šä¸€ç›´ç”Ÿæ•ˆ</li>
</ul>
<h3>å…³äºå–æ¶ˆè®¢é˜…</h3>
<h4>ç»“æŸ observable çš„æ–¹å¼</h4>
<ol>
<li>Observable å‘é€å®Œæ•°æ®ä¹‹åæ‰§è¡Œ Observable.onComplete()</li>
<li>Observable å‘ç”Ÿé”™è¯¯ï¼Œæ‰§è¡Œ Observable.OnError()</li>
<li>è®¢é˜…è€…ä¸»åŠ¨å–æ¶ˆï¼Œsubscription.unsubscribe()</li>
</ol>
<h4>angular ä¸­å¸¸è§çš„ Observable å“ªäº›éœ€è¦å–æ¶ˆè®¢é˜…</h4>
<ul>
<li>è°ƒç”¨ httpClient æ–¹æ³•è¿”å›çš„ Observable ä¸éœ€è¦å–æ¶ˆè®¢é˜…ï¼Œå› ä¸ºå‘é€æ•°æ®ä¹‹åï¼Œangular ä¼šè°ƒç”¨ Observable.onComplete()</li>
<li>ä½¿ç”¨ AsyncPipe ä¸éœ€è¦å–æ¶ˆè®¢é˜…</li>
<li>é€šè¿‡ Subjectï¼ŒBehaviorSubjectï¼ŒAsyncSubjectï¼ŒReplaySubject åœ¨å„ä¸ª Component ä¹‹é—´é€šä¿¡ï¼Œéœ€è¦è°ƒç”¨ unsubscribe()å–æ¶ˆè®¢é˜…</li>
<li>ä½¿ç”¨ rxjs è‡ªå¸¦çš„æ“ä½œç¬¦ä¸éœ€è¦å–æ¶ˆè®¢é˜…</li>
</ul>
<h3>åº”ç”¨å®ä¾‹</h3>
<h4>å¤„ç†å¤šä¸ª http è¯·æ±‚</h4>
<p>é‡åˆ°éœ€è¦è°ƒç”¨å¤šä¸ªæ¥å£è¿”å›æ•°æ®å¹¶ç»Ÿä¸€å¤„ç†çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ forkJoinï¼Œç±»ä¼¼ Promise.all()</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>  </span><span class="hljs-function" style="color:#8fa1b3">GetDetails</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">projectId: string</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#b48ead">const</span><span> projects = </span><span style="color:#d08770">this</span><span>._http.get&lt;any&gt;(</span><span style="color:#a3be8c">`/api/factory/projects/</span><span class="hljs-subst" style="color:#a3be8c">${projectId}</span><span style="color:#a3be8c">`</span><span>);
</span><span>    </span><span style="color:#b48ead">const</span><span> powers = </span><span style="color:#d08770">this</span><span>._http.get&lt;any&gt;(</span><span style="color:#a3be8c">`/api/factory/projectpermissions/projects/</span><span class="hljs-subst" style="color:#a3be8c">${projectId}</span><span style="color:#a3be8c">/userpermissions`</span><span>);
</span><span>    </span><span style="color:#b48ead">return</span><span> forkJoin([projects, powers]).pipe(
</span><span>      map(</span><span class="hljs-function" style="color:#d08770">values</span><span class="hljs-function"> =&gt;</span><span> {
</span><span>        </span><span style="color:#b48ead">const</span><span> project = values[</span><span style="color:#d08770">0</span><span>];
</span><span>        </span><span style="color:#b48ead">const</span><span> power = values[</span><span style="color:#d08770">1</span><span>];
</span><span>        </span><span style="color:#b48ead">return</span><span> { ...project, power };
</span>      })
<!-- -->    );
<!-- -->  }
</code></pre>
<h4>äº‹ä»¶èŠ‚æµ</h4>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>    </span><span style="color:#d08770">this</span><span>.ngZone.runOutsideAngular(</span><span class="hljs-function">() =&gt;</span><span> {
</span><span>      fromEvent(</span><span style="color:#d08770">window</span><span>, </span><span style="color:#a3be8c">&#x27;resize&#x27;</span><span>)
</span><span>        .pipe(debounceTime(</span><span style="color:#d08770">300</span><span>), takeUntil(</span><span style="color:#d08770">this</span><span>.destroy$))
</span><span>        .subscribe(</span><span class="hljs-function">() =&gt;</span><span> {
</span><span>          </span><span style="color:#65737e">// ...</span><span>
</span>        });
<!-- -->		});
</code></pre>
<h4>subscribe åµŒå¥—é—®é¢˜</h4>
<p>åœ¨ä½¿ç”¨ rxjs çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°åœ¨ä¸€ä¸ª subscribe å‡½æ•°é‡Œéœ€è¦è®¢é˜…å¦ä¸€ä¸ª Observable çš„æƒ…å†µï¼Œsubscribe åµŒå¥—è™½ç„¶ä¹Ÿèƒ½è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ­£ç¡®çš„å–æ¶ˆè®¢é˜…å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œå¹¶ä¸”å†™èµ·æ¥ä¹Ÿä¸ä¼˜é›…ã€‚è¿™ç§æ—¶å€™å¯ä»¥ä½¿ç”¨åˆå¹¶æ“ä½œç¬¦æ¥è§£å†³ï¼Œå¦‚<code>mergeMap</code>å’Œ<code>combineLatest</code>ç­‰ã€‚</p>
<p>æ¯”å¦‚ç›‘å¬è·¯ç”±å‚æ•°å˜åŒ–å¹¶ä½¿ç”¨è·¯ç”±å‚æ•°è°ƒç”¨æŸä¸ªæ¥å£è·å–æ•°æ®ï¼Œè¿™ç§ä¸²è”çš„å¯ä»¥ä½¿ç”¨<code>mergeMap</code>:</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>ngOnInit(): </span><span style="color:#d08770">void</span><span> {
</span><span>    </span><span style="color:#d08770">this</span><span>.activatedRoute.queryParamMap
</span>      .pipe(
<span>        map(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">params</span><span class="hljs-function">) =&gt;</span><span> params.get(</span><span style="color:#a3be8c">&#x27;id&#x27;</span><span>)),
</span><span>        mergeMap(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">id</span><span class="hljs-function">) =&gt;</span><span> fetchProject(id))
</span>      )
<span>      .subscribe(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">data</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        </span><span style="color:#d08770">console</span><span>.log(</span><span style="color:#a3be8c">&#x27;data&#x27;</span><span>, data);
</span>      });
<!-- -->}
</code></pre>
<h4>BehaviorSubjectã€ReplaySubject å’Œ AsyncSubject åŒºåˆ«</h4>
<h5>BehaviorSubject</h5>
<p>å¯ä»¥è®¾ç½®åˆå§‹å€¼ï¼Œå¹¶ä¸”è®¢é˜…çš„æ—¶å€™ä¼šé©¬ä¸Šå‘é€å­˜å‚¨çš„æœ€åä¸€ä¸ªå€¼ç»™è®¢é˜…è€…</p>
<h5>ReplaySubject</h5>
<p>å¯ä»¥å®ç°é‡æ’­ï¼Œnew ReplaySubject(å­˜å‚¨å‡ æ¬¡å¹¿æ’­ï¼Œè¿‡æœŸæ—¶é—´)</p>
<h5>AsyncSubject</h5>
<p>ä¸€æ ·å¯ä»¥å­˜å‚¨æ•°æ®ï¼Œä½†æ˜¯åªä¼šåœ¨ Observable ç»“æŸæ—¶å‘é€æ•°æ®</p>
<h3>rxjs è°ƒè¯•</h3>
<p><a href="https://blog.angular-university.io/debug-rxjs/">https://blog.angular-university.io/debug-rxjs/</a></p></div><div class="content-container"></div></main><footer class="grid place-items-center pb-4"><a href="https://github.com/hmilin" target="_blank" rel="noreferrer noopener">ğŸ˜˜Github</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    h3: \"h3\",\n    ul: \"ul\",\n    li: \"li\",\n    h4: \"h4\",\n    ol: \"ol\",\n    p: \"p\",\n    pre: \"pre\",\n    code: \"code\",\n    h5: \"h5\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"rxjs å­¦ä¹ è®°å½•\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"åŸºç¡€æ¦‚å¿µ\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Observable (å¯è§‚å¯Ÿå¯¹è±¡): è¡¨ç¤ºä¸€ä¸ªæ¦‚å¿µï¼Œè¿™ä¸ªæ¦‚å¿µæ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„æœªæ¥å€¼æˆ–äº‹ä»¶çš„é›†åˆã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Observer (è§‚å¯Ÿè€…): ä¸€ä¸ªå›è°ƒå‡½æ•°çš„é›†åˆï¼Œå®ƒçŸ¥é“å¦‚ä½•å»ç›‘å¬ç”± Observable æä¾›çš„å€¼ã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Subscription (è®¢é˜…): è¡¨ç¤º Observable çš„æ‰§è¡Œï¼Œä¸»è¦ç”¨äºå–æ¶ˆ Observable çš„æ‰§è¡Œã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Operators (æ“ä½œç¬¦): é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼çš„çº¯å‡½æ•° (pure function)ï¼Œä½¿ç”¨åƒ mapã€filterã€concatã€flatMap ç­‰è¿™æ ·çš„æ“ä½œç¬¦æ¥å¤„ç†é›†åˆã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Subject (ä¸»ä½“): ç›¸å½“äº EventEmitterï¼Œå¹¶ä¸”æ˜¯å°†å€¼æˆ–äº‹ä»¶å¤šè·¯æ¨é€ç»™å¤šä¸ª Observer çš„å”¯ä¸€æ–¹å¼ã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Schedulers (è°ƒåº¦å™¨): ç”¨æ¥æ§åˆ¶å¹¶å‘å¹¶ä¸”æ˜¯ä¸­å¤®é›†æƒçš„è°ƒåº¦å‘˜ï¼Œå…è®¸æˆ‘ä»¬åœ¨å‘ç”Ÿè®¡ç®—æ—¶è¿›è¡Œåè°ƒï¼Œä¾‹å¦‚ setTimeout æˆ– requestAnimationFrame æˆ–å…¶ä»–ã€‚\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"å¸¸ç”¨æ“ä½œç¬¦\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"of: è¿”å›ä¸€ä¸ª observableï¼Œä¾æ¬¡å‘å‡ºä¼ å…¥çš„å€¼\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"switchMap: ä¼šå–æ¶ˆä¸Šæ¬¡å‘å‡ºçš„ observableï¼Œé€šå¸¸å’Œ interval é…åˆä½¿ç”¨\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"mergeMap/flatMap: ä¸ map çš„åŒºåˆ«æ˜¯èƒ½å°†è¿”å›ç»“æœæ‰“å¹³ï¼Œè¿”å›ä¸€ä¸ª Observableï¼Œå¯ç”¨äºä¸²è”è¯·æ±‚æ•°æ®\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"merge: å°†å¤šä¸ª Observable åˆå¹¶ä¸ºä¸€ä¸ª\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"mergeAll: æ”¶é›†å¹¶è®¢é˜…æ‰€æœ‰ Observable,map + mergeAll === mergeMap\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"skipWhile: ç¬¦åˆæ¡ä»¶æ—¶è·³è¿‡æœ¬æ¬¡ï¼Œä½†æ˜¯ä¸€æ—¦å‡ºç°ä¸æ»¡è¶³æ¡ä»¶çš„é¡¹ï¼Œåˆ™ä¼šå‘å‡ºæ­¤ä¹‹åçš„æ‰€æœ‰é¡¹\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"takeWhileï¼šç¬¬ä¸€ä¸ªè¿”å› false æ—¶å®Œæˆ\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"takeUntil: ä¼ å…¥ä¸€ä¸ª Observableï¼Œå‘å‡ºä¿¡å·æ—¶æ—¶å®Œæˆå½“å‰ Observable\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"startWith: å¯ä»¥å’Œ interval ä¸€èµ·ä½¿ç”¨ï¼Œå®šä¹‰ç¬¬ä¸€æ¬¡è§¦å‘çš„ delay å‚æ•°\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"takeï¼šæŒ‡å®šç¬¬å‡ æ¬¡æ‰§è¡Œ\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"filter: è¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„æ•°æ®é¡¹ï¼Œå’Œ skipWhile ç±»ä¼¼ä½†æ˜¯ä¼šä¸€ç›´ç”Ÿæ•ˆ\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"å…³äºå–æ¶ˆè®¢é˜…\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"ç»“æŸ observable çš„æ–¹å¼\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Observable å‘é€å®Œæ•°æ®ä¹‹åæ‰§è¡Œ Observable.onComplete()\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Observable å‘ç”Ÿé”™è¯¯ï¼Œæ‰§è¡Œ Observable.OnError()\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"è®¢é˜…è€…ä¸»åŠ¨å–æ¶ˆï¼Œsubscription.unsubscribe()\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"angular ä¸­å¸¸è§çš„ Observable å“ªäº›éœ€è¦å–æ¶ˆè®¢é˜…\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"è°ƒç”¨ httpClient æ–¹æ³•è¿”å›çš„ Observable ä¸éœ€è¦å–æ¶ˆè®¢é˜…ï¼Œå› ä¸ºå‘é€æ•°æ®ä¹‹åï¼Œangular ä¼šè°ƒç”¨ Observable.onComplete()\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ä½¿ç”¨ AsyncPipe ä¸éœ€è¦å–æ¶ˆè®¢é˜…\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"é€šè¿‡ Subjectï¼ŒBehaviorSubjectï¼ŒAsyncSubjectï¼ŒReplaySubject åœ¨å„ä¸ª Component ä¹‹é—´é€šä¿¡ï¼Œéœ€è¦è°ƒç”¨ unsubscribe()å–æ¶ˆè®¢é˜…\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ä½¿ç”¨ rxjs è‡ªå¸¦çš„æ“ä½œç¬¦ä¸éœ€è¦å–æ¶ˆè®¢é˜…\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"åº”ç”¨å®ä¾‹\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"å¤„ç†å¤šä¸ª http è¯·æ±‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"é‡åˆ°éœ€è¦è°ƒç”¨å¤šä¸ªæ¥å£è¿”å›æ•°æ®å¹¶ç»Ÿä¸€å¤„ç†çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ forkJoinï¼Œç±»ä¼¼ Promise.all()\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"  GetDetails(projectId: string) {\\n    const projects = this._http.get\u003cany\u003e(`/api/factory/projects/${projectId}`);\\n    const powers = this._http.get\u003cany\u003e(`/api/factory/projectpermissions/projects/${projectId}/userpermissions`);\\n    return forkJoin([projects, powers]).pipe(\\n      map(values =\u003e {\\n        const project = values[0];\\n        const power = values[1];\\n        return { ...project, power };\\n      })\\n    );\\n  }\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"äº‹ä»¶èŠ‚æµ\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"    this.ngZone.runOutsideAngular(() =\u003e {\\n      fromEvent(window, 'resize')\\n        .pipe(debounceTime(300), takeUntil(this.destroy$))\\n        .subscribe(() =\u003e {\\n          // ...\\n        });\\n\\t\\t});\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"subscribe åµŒå¥—é—®é¢˜\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨ä½¿ç”¨ rxjs çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°åœ¨ä¸€ä¸ª subscribe å‡½æ•°é‡Œéœ€è¦è®¢é˜…å¦ä¸€ä¸ª Observable çš„æƒ…å†µï¼Œsubscribe åµŒå¥—è™½ç„¶ä¹Ÿèƒ½è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ­£ç¡®çš„å–æ¶ˆè®¢é˜…å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œå¹¶ä¸”å†™èµ·æ¥ä¹Ÿä¸ä¼˜é›…ã€‚è¿™ç§æ—¶å€™å¯ä»¥ä½¿ç”¨åˆå¹¶æ“ä½œç¬¦æ¥è§£å†³ï¼Œå¦‚\", _jsx(_components.code, {\n        children: \"mergeMap\"\n      }), \"å’Œ\", _jsx(_components.code, {\n        children: \"combineLatest\"\n      }), \"ç­‰ã€‚\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æ¯”å¦‚ç›‘å¬è·¯ç”±å‚æ•°å˜åŒ–å¹¶ä½¿ç”¨è·¯ç”±å‚æ•°è°ƒç”¨æŸä¸ªæ¥å£è·å–æ•°æ®ï¼Œè¿™ç§ä¸²è”çš„å¯ä»¥ä½¿ç”¨\", _jsx(_components.code, {\n        children: \"mergeMap\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"ngOnInit(): void {\\n    this.activatedRoute.queryParamMap\\n      .pipe(\\n        map((params) =\u003e params.get('id')),\\n        mergeMap((id) =\u003e fetchProject(id))\\n      )\\n      .subscribe((data) =\u003e {\\n        console.log('data', data);\\n      });\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"BehaviorSubjectã€ReplaySubject å’Œ AsyncSubject åŒºåˆ«\"\n    }), \"\\n\", _jsx(_components.h5, {\n      children: \"BehaviorSubject\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å¯ä»¥è®¾ç½®åˆå§‹å€¼ï¼Œå¹¶ä¸”è®¢é˜…çš„æ—¶å€™ä¼šé©¬ä¸Šå‘é€å­˜å‚¨çš„æœ€åä¸€ä¸ªå€¼ç»™è®¢é˜…è€…\"\n    }), \"\\n\", _jsx(_components.h5, {\n      children: \"ReplaySubject\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"å¯ä»¥å®ç°é‡æ’­ï¼Œnew ReplaySubject(å­˜å‚¨å‡ æ¬¡å¹¿æ’­ï¼Œè¿‡æœŸæ—¶é—´)\"\n    }), \"\\n\", _jsx(_components.h5, {\n      children: \"AsyncSubject\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ä¸€æ ·å¯ä»¥å­˜å‚¨æ•°æ®ï¼Œä½†æ˜¯åªä¼šåœ¨ Observable ç»“æŸæ—¶å‘é€æ•°æ®\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"rxjs è°ƒè¯•\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://blog.angular-university.io/debug-rxjs/\",\n        children: \"https://blog.angular-university.io/debug-rxjs/\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"title":"rxjså­¦ä¹ è®°å½•","date":"2021-03-13 18:53:00","description":"ä»‹ç»rxjsçš„å¸¸ç”¨æ“ä½œç¬¦å’Œä½¿ç”¨åœºæ™¯ã€‚"}},"frontMatter":{"title":"rxjså­¦ä¹ è®°å½•","date":"2021-03-13 18:53:00","description":"ä»‹ç»rxjsçš„å¸¸ç”¨æ“ä½œç¬¦å’Œä½¿ç”¨åœºæ™¯ã€‚"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"rxjs"},"buildId":"4t3GX91zvuNjfyiqlqIfW","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>