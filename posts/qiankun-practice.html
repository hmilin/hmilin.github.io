<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>è›‹é»„æ´¾ç¢å†°å†°</title><meta name="description" content="è›‹é»„æ´¾ç¢å†°å†°çš„åšå®¢"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/da7f7373972fd13e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/da7f7373972fd13e.css" data-n-g=""/><link rel="preload" href="/_next/static/css/2af2181b72eb90fa.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2af2181b72eb90fa.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-fe24048b3b27bff9.js" defer=""></script><script src="/_next/static/chunks/framework-1e9a4d353c1366cc.js" defer=""></script><script src="/_next/static/chunks/main-c8036f9753ad02f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c011ee5ac2d8b7d0.js" defer=""></script><script src="/_next/static/chunks/249-5270d5c7a8955805.js" defer=""></script><script src="/_next/static/chunks/758-3579d4bae6c59ed8.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-481649dba8686aa3.js" defer=""></script><script src="/_next/static/2nKvk5WaOwF93xw62gKAV/_buildManifest.js" defer=""></script><script src="/_next/static/2nKvk5WaOwF93xw62gKAV/_ssgManifest.js" defer=""></script><script src="/_next/static/2nKvk5WaOwF93xw62gKAV/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_container__CSAqU"><header class="Header_header__Z4YN5"><a href="/">è›‹é»„æ´¾ç¢å†°å†°</a><nav><ul><li><a href="/#posts">æ–‡ç« </a></li><li><a href="/about">å…³äº</a></li></ul></nav></header><main><div class="Layout_banner__0qsJd"><h1>å¾®å‰ç«¯æ¡†æ¶qiankunå®è·µ</h1><p>åŸºäºqiankunå®ç°Angularå‘Reactçš„æ¸è¿›å¼é‡æ„</p><div>2022-09-09 12:00:03</div></div><div class="content-container"><h1>å¾®å‰ç«¯æ¡†æ¶ qiankun å®è·µ</h1>
<p>æœ€è¿‘æŠŠä¸€ä¸ªå¹´ä»£è¾ƒä¹…çš„<code>Angular</code>åº”ç”¨é‡æ„æˆ<code>React</code>ï¼Œåˆ†äº†äº”å…­ä¸ªè¿­ä»£ä¸€æ­¥æ­¥é‡å†™ï¼Œç»ˆäºå…¨éƒ¨å®Œæˆæ›¿æ¢ã€‚ç”¨è¿™ç¯‡åšå®¢è®°å½•ä¸€ä¸‹ç¢°åˆ°çš„é—®é¢˜ã€‚</p>
<h2>ä¸ºä»€ä¹ˆéœ€è¦å¾®å‰ç«¯æ¡†æ¶?</h2>
<h3>èåˆä¸åŒå‰ç«¯æŠ€æœ¯æ ˆçš„é¡¹ç›®</h3>
<p>ç°å¦‚ä»Šå‰ç«¯æ¡†æ¶ä¸»è¦æœ‰<code>Angular</code>ã€<code>React</code>å’Œ <code>Vue</code>ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½æœ‰å¾ˆå¤šå‘¨è¾¹å·¥å…·ï¼Œæˆ‘ç¢°åˆ°çš„ä¸»è¦æœ‰ä¸¤ç§åœºæ™¯éœ€è¦åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆï¼š</p>
<p>ä¸€æ˜¯æŠ€æœ¯æ ˆè½¬å‹ï¼Œç”±äºç§ç§åŸå› è¦ä»ä¸€ä¸ªæŠ€æœ¯æ ˆè½¬æ¢åˆ°å¦ä¸€ä¸ªæŠ€æœ¯æ ˆï¼Œä½†æ˜¯åˆæ²¡åŠæ³•å…¨éƒ¨ä»£ç ä¸€æ¬¡æ€§é‡æ„ï¼Œå¾®å‰ç«¯æ˜¯ä¸€ç§éå¸¸å¥½çš„å®æ–½æ¸è¿›å¼é‡æ„çš„æ‰‹æ®µå’Œç­–ç•¥ã€‚</p>
<p>äºŒæ˜¯å·¥å…·ä½¿ç”¨ä¾èµ–äºæŠ€æœ¯æ ˆï¼Œå‡å¦‚ä½ æƒ³å¼•å…¥ä¸€ä¸ªè¡¨å•ç”Ÿæˆå¼•æ“æˆ–å›¾å¯è§†åŒ–å·¥å…·ï¼Œä½†è¿™äº›å·¥å…·ä¾èµ–äºå¦ä¸€ä¸ªæŠ€æœ¯æ ˆï¼Œåœ¨å½“å‰ä½¿ç”¨çš„æŠ€æœ¯æ ˆç”Ÿæ€ä¸­æ²¡æœ‰æ›´å¥½çš„äº§å“æ›¿ä»£ï¼Œè¿™ç§æ—¶å€™ä¹Ÿå¯ä»¥è€ƒè™‘å¦èµ·ä¸€ä¸ªå¾®é¡¹ç›®æ¥å®ç°è¿™ä¸€æ¨¡å—çš„åŠŸèƒ½ã€‚</p>
<h3>è§£å†³å•ä½“é¡¹ç›®çš„ä¸å¯ç»´æŠ¤æ€§</h3>
<blockquote>
<p>å¾®å‰ç«¯æ¶æ„æ—¨åœ¨è§£å†³å•ä½“åº”ç”¨åœ¨ä¸€ä¸ªç›¸å¯¹é•¿çš„æ—¶é—´è·¨åº¦ä¸‹ï¼Œç”±äºå‚ä¸çš„äººå‘˜ã€å›¢é˜Ÿçš„å¢å¤šã€å˜è¿ï¼Œä»ä¸€ä¸ªæ™®é€šåº”ç”¨æ¼”å˜æˆä¸€ä¸ªå·¨çŸ³åº”ç”¨(Frontend Monolith)åï¼Œéšä¹‹è€Œæ¥çš„åº”ç”¨ä¸å¯ç»´æŠ¤çš„é—®é¢˜ã€‚è¿™ç±»é—®é¢˜åœ¨ä¼ä¸šçº§ Web åº”ç”¨ä¸­å°¤å…¶å¸¸è§ã€‚</p>
</blockquote>
<p>qiankun å¯ä»¥å°†ä¸€ä¸ªä¸šåŠ¡å¤æ‚çš„é¡¹ç›®åˆ†ä¸ºå¤šä¸ªå­åº”ç”¨ï¼Œæ¯ä¸ªå­åº”ç”¨ç‹¬ç«‹å¼€å‘ç‹¬ç«‹éƒ¨ç½²ï¼Œéƒ¨ç½²å®Œæˆåä¸»åº”ç”¨è‡ªåŠ¨å®ŒæˆåŒæ­¥æ›´æ–°ã€‚</p>
<h2>å®è·µèƒŒæ™¯</h2>
<p>æœ¬æ¬¡ä½¿ç”¨ qiankun ç›®çš„æ˜¯å°†<code>Angular</code> çš„é¡¹ç›®è½¬æˆ Reactã€‚Angular é¡¹ç›®ä½¿ç”¨çš„æ˜¯<code>Angular@9.x</code>ï¼Œæ˜¯ä¸ªæ¯”è¾ƒæ—§çš„é¡¹ç›®ï¼Œä¸šåŠ¡æ¯”è¾ƒå¤šï¼Œä»£ç ä¸­å…¨å±€æ ·å¼è¾ƒå¤šä¸”æ¯”è¾ƒæ··ä¹±ã€‚React é¡¹ç›®æ˜¯åŸºäº Umi æ¡†æ¶æ„å»ºçš„ã€‚</p>
<h2>å¾®å‰ç«¯çš„å·¥ä½œåŸç†</h2>
<ol>
<li>å­åº”ç”¨å¯¼å‡ºç”Ÿå‘½å‘¨æœŸä¾›ä¸»åº”ç”¨è°ƒç”¨ã€‚</li>
<li>æä¾›å­åº”ç”¨ä¸»åº”ç”¨é€šä¿¡æ–¹å¼ã€‚</li>
<li>JS æ²™ç®±æ¨¡å¼ï¼Œéš”ç»åº”ç”¨ã€‚</li>
<li>CSS éš”ç¦»æ–¹æ¡ˆã€‚</li>
</ol>
<h2>ä¸»åº”ç”¨å’Œå­åº”ç”¨é€‰å–</h2>
<p>ç”±äº<code>React</code>é¡¹ç›®æ˜¯æœ€ç»ˆç›®æ ‡ï¼Œå› æ­¤ç›´æ¥å°† React é¡¹ç›®ä½œä¸ºä¸»åº”ç”¨ï¼Œ<code>Angular</code>é¡¹ç›®æ”¹é€ ä¸ºå­åº”ç”¨ï¼Œå†æŒ‰æ¨¡å—æ¥é‡æ„ï¼Œé€æ­¥æ›¿æ¢ã€‚</p>
<h2>React ä¸»åº”ç”¨é…ç½®</h2>
<p>ç”±äº React é¡¹ç›®æ˜¯ä½¿ç”¨äº†<code>Umi</code>ï¼Œ<code>Umi</code>è‡ªèº«æä¾›äº†<code>qiankun</code>çš„æ’ä»¶<code>@umijs/plugin-qiankun</code>ï¼Œå¼€å¯<code>qiankun</code>åªéœ€è¦å°‘é‡çš„é…ç½®ã€‚</p>
<p>é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>å®‰è£…æ’ä»¶<code>@umijs/plugin-qiankun</code></p>
</li>
<li>
<p>åœ¨<code>config.ts</code>ä¸­é…ç½®å­åº”ç”¨</p>
</li>
</ol>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>qiankun: {
</span><span>	</span><span class="hljs-attr">master</span><span>: {
</span><span>		</span><span class="hljs-attr">apps</span><span>: [
</span>			{
<span>				</span><span class="hljs-attr">name</span><span>: </span><span style="color:#a3be8c">&#x27;angular9&#x27;</span><span>,
</span><span>				</span><span class="hljs-attr">entry</span><span>: </span><span style="color:#a3be8c">&#x27;http://localhost:8001&#x27;</span><span>, </span><span style="color:#65737e">// å…¥å£</span><span>
</span><span>				</span><span style="color:#65737e">// å¯æ”¾ä¸€äº›é™æ€çš„å‚æ•°ä¼ ç»™å­åº”ç”¨</span><span>
</span><span>				</span><span class="hljs-attr">props</span><span>: {
</span><span>					</span><span class="hljs-attr">testProp1</span><span>: </span><span style="color:#a3be8c">&#x27;test1&#x27;</span><span>,
</span>				},
<!-- -->			},
<!-- -->		],
<span>		</span><span class="hljs-attr">prefetch</span><span>: </span><span style="color:#a3be8c">&#x27;all&#x27;</span><span>,
</span><span>		</span><span class="hljs-attr">sandbox</span><span>: {
</span><span>			</span><span class="hljs-attr">strictStyleIsolation</span><span>: </span><span style="color:#d08770">false</span><span>,
</span><span>			</span><span class="hljs-attr">experimentalStyleIsolation</span><span>: </span><span style="color:#d08770">true</span><span>,
</span>		},
<!-- -->	},
<!-- -->},
</code></pre>
<ol start="3">
<li>ç»™å­åº”ç”¨åˆ†é…è·¯ç”±</li>
</ol>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>routes: [
</span>	{
<span>		</span><span class="hljs-attr">path</span><span>: </span><span style="color:#a3be8c">&#x27;/&#x27;</span><span>,
</span><span>		</span><span class="hljs-attr">component</span><span>: </span><span style="color:#a3be8c">&#x27;@/layouts&#x27;</span><span>,
</span><span>		</span><span class="hljs-attr">routes</span><span>: [
</span><span>			</span><span style="color:#65737e">// other</span><span>
</span>			{
<span>				</span><span class="hljs-attr">path</span><span>: </span><span style="color:#a3be8c">&#x27;v1&#x27;</span><span>,
</span><span>				</span><span class="hljs-attr">microApp</span><span>: </span><span style="color:#a3be8c">&#x27;angular9&#x27;</span><span>, </span><span style="color:#65737e">// ä¸Šé¢çš„å­åº”ç”¨çš„åå­—</span><span>
</span><span>				</span><span class="hljs-attr">microAppProps</span><span>: {
</span><span>					</span><span class="hljs-attr">autoSetLoading</span><span>: </span><span style="color:#d08770">false</span><span>, </span><span style="color:#65737e">// æ˜¯å¦å¼€å¯loadingåŠ¨ç”»</span><span>
</span><span>					</span><span class="hljs-attr">className</span><span>: </span><span style="color:#a3be8c">&#x27;appClassName&#x27;</span><span>,
</span><span>					</span><span class="hljs-attr">wrapperClassName</span><span>: </span><span style="color:#a3be8c">&#x27;wrapperClass&#x27;</span><span>,
</span>				},
<!-- -->			},
<span>			</span><span style="color:#65737e">// other</span><span>
</span>		],
<!-- -->	},
<!-- -->],
</code></pre>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯è·¯ç”±ç»‘å®šçš„æ–¹å¼ï¼Œ<code>@umijs/plugin-qiankun</code>è¿˜æä¾›äº†ç»„ä»¶<code>&lt;MicroApp /&gt;</code>æ¥å¼•å…¥å­åº”ç”¨ï¼Œç»„ä»¶å¼•å…¥çš„æ–¹å¼é€‚åˆä¸å¸¦è·¯ç”±çš„å­åº”ç”¨ã€‚</p>
<ol start="4">
<li>å¼•å…¥<code>Zone.js</code></li>
</ol>
<p><code>Angular</code>çš„è„æ•°æ®æ£€æµ‹ä¾èµ–<code>Zone.js</code>ï¼Œå½“ä¸€ä¸ªé¡µé¢ä¸Šå­˜åœ¨å¤šä¸ª<code>Zone</code>å®ä¾‹æ—¶ï¼Œ<code>Zone.js</code>ä¼šæŠ›å‡ºé”™è¯¯ã€‚å› æ­¤ä¸ºç¡®ä¿é¡µé¢ä¸Šåªè¿è¡Œä¸€ä¸ª<code>Zone</code>å®ä¾‹ï¼Œç»Ÿä¸€åœ¨ä¸»åº”ç”¨å¼•å…¥<code>Zone.js</code>ã€‚</p>
<h2>Angular å­åº”ç”¨é…ç½®</h2>
<p>æ³¨ï¼š<code>qiankun</code>å®˜æ–¹æ–‡æ¡£ä¸­çš„<code>Angular</code>å­åº”ç”¨é…ç½®æ˜¯æ—§ç‰ˆæœ¬ï¼Œæœ€æ–°ç‰ˆæœ¬çš„åº”å‚è€ƒ github ä»“åº“<a href="https://github.com/umijs/qiankun/tree/master/examples/angular9%E3%80%82">https://github.com/umijs/qiankun/tree/master/examples/angular9ã€‚</a></p>
<ol>
<li>å®‰è£…éœ€è¦çš„æ’ä»¶</li>
</ol>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>yarn add -D @angular-builders/custom-webpack
</span>yarn add single-spa single-spa-angular
</code></pre>
<ul>
<li>
<p><code>Angular</code>æ˜¯ä½¿ç”¨<code>Webpack</code>æ„å»ºï¼Œå¸¸è§„çš„é…ç½®åœ¨<code>angular.json</code>æŒ‡å®šï¼Œä½¿ç”¨<code>@angular-builders/custom-webpack</code>å¯ä»¥æ‰©å±•å…¶ä»–<code>Webpack</code>é…ç½®ã€‚</p>
</li>
<li>
<p><code>single-spa-angular</code>æ˜¯<code>single-spa</code>å®˜æ–¹æä¾›çš„ï¼Œä½¿ç”¨å®ƒå¯ä»¥å¿«é€Ÿçš„é…ç½®ç”Ÿå‘½å‘¨æœŸçš„å¯¼å‡ºå’Œ<code>Webpack</code>é…ç½®ã€‚</p>
</li>
</ul>
<ol start="2">
<li>åœ¨<code>main.ts</code>ä¸­é…ç½®å…¥å£åŠ è½½å’Œç”Ÿå‘½å‘¨æœŸå¯¼å‡º</li>
</ol>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>+ </span><span style="color:#b48ead">import</span><span> { singleSpaAngular, getSingleSpaExtraProviders } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&#x27;single-spa-angular&#x27;</span><span>;
</span><span>+ </span><span style="color:#b48ead">import</span><span> { singleSpaPropsSubject } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&#x27;./single-spa/single-spa-props&#x27;</span><span>;
</span>
<span></span><span style="color:#65737e">// åªåœ¨éqiankunå­åº”ç”¨ç¯å¢ƒä¸‹æ‰§è¡Œ</span><span>
</span><span>+	</span><span style="color:#b48ead">if</span><span> (!(</span><span style="color:#d08770">window</span><span> </span><span style="color:#b48ead">as</span><span> </span><span style="color:#d08770">any</span><span>).__POWERED_BY_QIANKUN__) {
</span>		platformBrowserDynamic()
<!-- -->			.bootstrapModule(AppModule)
<span>			.catch(</span><span class="hljs-function" style="color:#d08770">err</span><span class="hljs-function"> =&gt;</span><span> </span><span style="color:#d08770">console</span><span>.error(err));
</span>+	}
<!-- -->
<span>+ </span><span style="color:#b48ead">const</span><span> { bootstrap, mount, unmount } = singleSpaAngular({
</span><span>+   bootstrapFunction: </span><span class="hljs-function" style="color:#d08770">singleSpaProps</span><span class="hljs-function"> =&gt;</span><span> {
</span><span>+	 	</span><span style="color:#65737e">// ä¸»åº”ç”¨å‘å­åº”ç”¨ä¼ å‚</span><span>
</span>+     singleSpaPropsSubject.next(singleSpaProps);
<span>+     </span><span style="color:#b48ead">return</span><span> platformBrowserDynamic(getSingleSpaExtraProviders()).bootstrapModule(AppModule);
</span>+   },
<span>+   template: </span><span style="color:#a3be8c">&#x27;&lt;app-root /&gt;&#x27;</span><span>,
</span>+   Router,
<!-- -->+   NgZone: NgZone,
<!-- -->+ });
</code></pre>
<ol start="3">
<li>é…ç½®è·¯ç”± baseï¼Œä¿®æ”¹<code>app-routing.module.ts</code></li>
</ol>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#d08770">@NgModule</span><span>({
</span>  ...
<span>  </span><span class="hljs-attr">providers</span><span>: [
</span>    {
<span>      </span><span class="hljs-attr">provide</span><span>: APP_BASE_HREF,
</span><span>      </span><span class="hljs-attr">useValue</span><span>: (</span><span style="color:#d08770">window</span><span> </span><span style="color:#b48ead">as</span><span> </span><span style="color:#d08770">any</span><span>).__POWERED_BY_QIANKUN__ ? </span><span style="color:#a3be8c">&#x27;/v1&#x27;</span><span> : </span><span style="color:#a3be8c">&#x27;/&#x27;</span><span>,
</span>    },
<!-- -->  ],
<!-- -->})
</code></pre>
<ol start="4">
<li>æ³¨é‡Šæ‰<code>zone.js</code>çš„å¼•å…¥</li>
</ol>
<p>æ³¨é‡Šæ‰<code>polyfills.ts</code>ä¸­çš„<code>zone.js</code>å¼•å…¥</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#bf616a">//</span><span> import </span><span style="color:#a3be8c">&#x27;zone.js/dist/zone&#x27;</span><span>; </span><span style="color:#bf616a">//</span><span> Included with Angular CLI.
</span></code></pre>
<p>åœ¨<code>index.html</code>ä¸­å¼•å…¥ï¼Œé€‚é…å­åº”ç”¨å•ç‹¬è¿è¡Œ</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>&lt;head&gt;
</span><span> </span><span class="xml" style="color:#bf616a">&lt;</span><span class="xml" style="color:#bf616a">script</span><span class="xml" style="color:#bf616a"> </span><span class="xml hljs-attr" style="color:#bf616a">src</span><span class="xml" style="color:#bf616a">=</span><span class="xml" style="color:#a3be8c">&quot;https://unpkg.com/zone.js&quot;</span><span class="xml" style="color:#bf616a"> </span><span class="xml hljs-attr" style="color:#bf616a">ignore</span><span class="xml" style="color:#bf616a">&gt;</span><span class="xml" style="color:#bf616a">&lt;/</span><span class="xml" style="color:#bf616a">script</span><span class="xml" style="color:#bf616a">&gt;</span><span>
</span>&lt;/head&gt;
</code></pre>
<h2>å¾®å‰ç«¯å¸¸è§é—®é¢˜</h2>
<h3>çˆ¶å­åº”ç”¨é—´é€šä¿¡</h3>
<p><code>Umi</code>å¯¹<code>qiankun</code>çš„<code>initGlobalState</code>ç»“åˆ<code>initial-state</code>æ’ä»¶åšäº†å°è£…ï¼Œåªéœ€åœ¨å…¥å£ç®€å•é…ç½®ï¼Œå³å¯ä½¿ç”¨<code>useModel</code>æ¥è·Ÿå­åº”ç”¨é€šä¿¡ã€‚åœ¨<code>Angular</code>å­åº”ç”¨ä¸­å³é€šè¿‡<code>single-spa</code>æ’ä»¶å¯¼å‡ºæ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸå¹¶è·å–ä¸»åº”ç”¨å…±äº«çš„çŠ¶æ€ã€‚</p>
<ol>
<li>ä¸»åº”ç”¨é…ç½®</li>
</ol>
<p>ä¿®æ”¹<code>app.ts</code></p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#65737e">// ç»™è·¯ç”±ç»‘å®šçš„å¾®åº”ç”¨ä¼ å€¼</span><span>
</span><span></span><span style="color:#b48ead">export</span><span> </span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#8fa1b3">useQiankunStateForSlave</span><span class="hljs-function">(</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#b48ead">const</span><span> [masterState, setMasterState] = useState&lt;MasterState&gt;({});
</span>
<span>  </span><span style="color:#b48ead">return</span><span> {
</span>    masterState,
<!-- -->    setMasterState,
<!-- -->  };
<!-- -->}
</code></pre>
<p>ç»„ä»¶ä¸­æ‹¿å€¼å’Œä¼ å€¼</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#b48ead">import</span><span> { useModel } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&#x27;umi&#x27;</span><span>;
</span>
<span></span><span style="color:#b48ead">const</span><span> Layout: React.FC&lt;LayoutProps&gt; = </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">{ children }</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>  </span><span style="color:#b48ead">const</span><span> { masterState, setMasterState } = useModel(</span><span style="color:#a3be8c">&#x27;@@qiankunStateForSlave&#x27;</span><span>);
</span>
<span>  </span><span style="color:#b48ead">const</span><span> { </span><span class="hljs-attr">data</span><span>: user } = useRequest(fetchUser);
</span>
<span>  useEffect(</span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#b48ead">if</span><span> (user) {
</span>      setMasterState({ user });
<!-- -->    }
<!-- -->  }, [user]);
<!-- -->
<span>	</span><span style="color:#65737e">// ...</span><span>
</span>}
</code></pre>
<ol start="2">
<li>å­åº”ç”¨é…ç½®</li>
</ol>
<p><code>main.ts</code>ä¸­å¯¼å‡º<code>update</code>ç”Ÿå‘½å‘¨æœŸ</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#b48ead">const</span><span> { bootstrap, mount, unmount, update } = singleSpaAngular({
</span><span>  </span><span style="color:#65737e">// ...,</span><span>
</span><span>  </span><span class="hljs-attr">updateFunction</span><span>: </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">singleSpaProps: SingleSpaProps</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>    </span><span style="color:#d08770">console</span><span>.log(</span><span style="color:#a3be8c">&quot;update singleSpaProps&quot;</span><span>, singleSpaProps);
</span>    singleSpaPropsSubject.next(singleSpaProps);
<span>    </span><span style="color:#b48ead">return</span><span> </span><span style="color:#d08770">Promise</span><span>.resolve();
</span>  },
<span>	</span><span style="color:#65737e">// ...</span><span>
</span>});
</code></pre>
<p>ç»„ä»¶ä¸­è·å–</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#b48ead">export</span><span> </span><span class="hljs-class" style="color:#b48ead">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#8fa1b3">AppComponent</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#8fa1b3">implements</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#8fa1b3">OnInit</span><span class="hljs-class">, </span><span class="hljs-class" style="color:#8fa1b3">OnDestroy</span><span class="hljs-class"> </span><span>{
</span><span>	</span><span style="color:#65737e">// ...</span><span>
</span><span>	ngOnInit(): </span><span style="color:#d08770">void</span><span> {
</span><span>		</span><span style="color:#65737e">// ç›‘å¬ä¸»åº”ç”¨å…±äº«æ•°æ®æ›´æ–°</span><span>
</span><span>    singleSpaPropsSubject.pipe(takeUntil(</span><span style="color:#d08770">this</span><span>.destroy)).subscribe(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">props</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>      </span><span style="color:#b48ead">const</span><span> { user } = props.masterState ?? {};
</span><span>      </span><span style="color:#b48ead">if</span><span> (user) {
</span><span>        </span><span style="color:#d08770">this</span><span>.authService.user.next(user);
</span>      }
<!-- -->    });
<!-- -->	}
<!-- -->}
</code></pre>
<p>åœ¨<code>single-spa-props.ts</code>ä¸­å¯¼å‡ºä¸€ä¸ªæ–¹æ³•ç”¨äºç»™çˆ¶ç»„ä»¶ä¼ å€¼</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#65737e">// å‘çˆ¶ç»„ä»¶ä¼ å€¼</span><span>
</span><span></span><span style="color:#b48ead">export</span><span> </span><span style="color:#b48ead">const</span><span> setMasterState = </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">state: Partial&lt;MasterState&gt;</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>  singleSpaPropsSubject.pipe(take(</span><span style="color:#d08770">1</span><span>)).subscribe(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">props</span><span class="hljs-function">) =&gt;</span><span> {
</span>    props.setMasterState({ ...props.masterState, ...state });
<!-- -->  });
<!-- -->};
</code></pre>
<h3>æ ·å¼éš”ç¦»</h3>
<p><code>qiankun</code>æä¾›äº†ä¸¤ç§æ ·å¼éš”ç¦»æ–¹æ¡ˆï¼Œé€šè¿‡é…ç½®<code>sandbox</code>æ¥å¼€å¯æ ·å¼éš”ç¦»ã€‚<code>strictStyleIsolation</code>ä¸º<code>true</code>è¡¨ç¤ºå¼€å¯<code>ShadowDom</code>	çš„ä¸¥æ ¼æ ·å¼éš”ç¦»ï¼Œè¿™ç§æ¨¡å¼ä¸‹<code>qiankun</code>ä¼šä¸ºæ¯ä¸ªå¾®åº”ç”¨çš„å®¹å™¨åŒ…è£¹ä¸Šä¸€ä¸ª<code>shadow dom</code>èŠ‚ç‚¹ã€‚<code>experimentalStyleIsolation</code>æ˜¯<code>qiankun</code>æä¾›çš„ä¸€ä¸ªå®éªŒæ€§çš„æ ·å¼éš”ç¦»ç‰¹æ€§ï¼Œä¼šç»™æ¯ä¸ªå­åº”ç”¨çš„æ ·å¼å¤šå¥—ä¸€å±‚æ ¹é€‰æ‹©å™¨æ¥è¾¾åˆ°å­åº”ç”¨é—´æ ·å¼éš”ç¦»çš„æ•ˆæœã€‚</p>
<p><code>ShadowDom</code>æ–¹æ¡ˆéœ€è¦æ ¹æ®ä¸åŒæ¡†æ¶å»åšæ”¹é€ å’Œé€‚é…æ‰èƒ½ç”¨èµ·æ¥ï¼Œæ‰€ä»¥é¡¹ç›®ä¸­ä½¿ç”¨äº†ç¬¬äºŒç§æ–¹æ¡ˆã€‚</p>
<h3>éƒ¨ç½²é…ç½®</h3>
<p>åœ¨åšå¾®å‰ç«¯æ”¹é€ ä¹‹å‰ï¼Œæœ¬é¡¹ç›®æ˜¯ä»¥<code>Nginx</code>ä½œä¸ºæœåŠ¡å™¨ï¼Œå› æ­¤åªéœ€è¦æ ¹æ®å­åº”ç”¨è·¯ç”±çš„å®šä¹‰ï¼Œåœ¨Nginxä¸ŠåŠ ä¸€ä¸ªè½¬å‘è§„åˆ™ï¼Œè½¬åˆ°å­åº”ç”¨çš„æ–‡ä»¶ç›®å½•å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­åº”ç”¨çš„å…¥å£é…ç½®éœ€è¦å’Œ<code>Nginx</code>ä¸Šçš„è·¯å¾„é…ç½®ä¿æŒä¸€è‡´ã€‚</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>qiankun: {
</span><span>    </span><span class="hljs-attr">master</span><span>: {
</span><span>      </span><span class="hljs-attr">apps</span><span>: [
</span>        {
<span>          </span><span class="hljs-attr">name</span><span>: </span><span style="color:#a3be8c">&#x27;angular9&#x27;</span><span>,
</span><span>          </span><span class="hljs-attr">entry</span><span>:
</span><span>            process.env.NODE_ENV === </span><span style="color:#a3be8c">&#x27;development&#x27;</span><span>
</span><span>              ? </span><span style="color:#a3be8c">&#x27;http://localhost:8001&#x27;</span><span>
</span><span>              : </span><span style="color:#a3be8c">&#x27;/v1/&#x27;</span><span>,
</span>        },
<!-- -->      ],
<span>      </span><span style="color:#65737e">// ...</span><span>
</span>    },
<!-- -->  },
</code></pre>
<h2>ç¢°åˆ°çš„å‘</h2>
<h3>antd popover å¯¼è‡´é¡µé¢å´©æºƒ</h3>
<p>ç»è¿‡æ’æŸ¥æ˜¯<code>antd</code>çš„åŸºç¡€ç»„ä»¶<code>rc-trigger@5.2.10</code>çš„é—®é¢˜ï¼Œåœ¨æœ€è¿‘å‘å¸ƒçš„æ–°ç‰ˆæœ¬ä¸­å·²ç»ä¿®å¤äº†æ”¹é—®é¢˜ï¼Œåœ¨ä¿®å¤ä¹‹å‰æ˜¯é€šè¿‡<code>patches</code>æ¥ä¿®æ”¹åŒ…çš„æºä»£ç ã€‚</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>diff --git a/node_modules/rc-trigger/es/Popup/PopupInner.js b/node_modules/rc-trigger/es/Popup/PopupInner.js
</span><span>index aacf97b..8ebea1b </span><span style="color:#d08770">100644</span><span>
</span>--- a/node_modules/rc-trigger/es/Popup/PopupInner.js
<!-- -->+++ b/node_modules/rc-trigger/es/Popup/PopupInner.js
<span>@@ -</span><span style="color:#d08770">82</span><span>,</span><span style="color:#d08770">9</span><span> +</span><span style="color:#d08770">82</span><span>,</span><span style="color:#d08770">12</span><span> @@ </span><span style="color:#b48ead">var</span><span> PopupInner = </span><span style="color:#65737e">/*#__PURE__*/</span><span>React.forwardRef(</span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> (</span><span class="hljs-function" style="color:#d08770">props, ref</span><span class="hljs-function">) </span><span>{
</span><span>     </span><span style="color:#b48ead">if</span><span> (status === </span><span style="color:#a3be8c">&#x27;align&#x27;</span><span>) {
</span><span>       </span><span style="color:#65737e">// Repeat until not more align needed</span><span>
</span><span>       </span><span style="color:#b48ead">if</span><span> (alignedClassName !== nextAlignedClassName) {
</span><span>-        </span><span style="color:#d08770">Promise</span><span>.resolve().then(</span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> (</span><span class="hljs-function">) </span><span>{
</span><span>+        </span><span style="color:#65737e">// Promise.resolve().then(function () {</span><span>
</span><span>+        </span><span style="color:#65737e">//   forceAlign();</span><span>
</span><span>+        </span><span style="color:#65737e">// });</span><span>
</span><span>+        </span><span style="color:#d08770">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> {
</span>           forceAlign();
<!-- -->-        });
<span>+        }, </span><span style="color:#d08770">0</span><span>);
</span><span>       } </span><span style="color:#b48ead">else</span><span> {
</span><span>         goNextStatus(</span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> (</span><span class="hljs-function">) </span><span>{
</span><span>           </span><span style="color:#b48ead">var</span><span> _prepareResolveRef$cu;
</span>diff --git a/node_modules/rc-trigger/lib/Popup/PopupInner.js b/node_modules/rc-trigger/lib/Popup/PopupInner.js
<span>index b603854..7daa11b </span><span style="color:#d08770">100644</span><span>
</span>--- a/node_modules/rc-trigger/lib/Popup/PopupInner.js
<!-- -->+++ b/node_modules/rc-trigger/lib/Popup/PopupInner.js
<span>@@ -</span><span style="color:#d08770">102</span><span>,</span><span style="color:#d08770">9</span><span> +</span><span style="color:#d08770">102</span><span>,</span><span style="color:#d08770">12</span><span> @@ </span><span style="color:#b48ead">var</span><span> PopupInner = </span><span style="color:#65737e">/*#__PURE__*/</span><span>React.forwardRef(</span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> (</span><span class="hljs-function" style="color:#d08770">props, ref</span><span class="hljs-function">) </span><span>{
</span><span>     </span><span style="color:#b48ead">if</span><span> (status === </span><span style="color:#a3be8c">&#x27;align&#x27;</span><span>) {
</span><span>       </span><span style="color:#65737e">// Repeat until not more align needed</span><span>
</span><span>       </span><span style="color:#b48ead">if</span><span> (alignedClassName !== nextAlignedClassName) {
</span><span>-        </span><span style="color:#d08770">Promise</span><span>.resolve().then(</span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> (</span><span class="hljs-function">) </span><span>{
</span><span>+        </span><span style="color:#65737e">// Promise.resolve().then(function () {</span><span>
</span><span>+        </span><span style="color:#65737e">//   forceAlign();</span><span>
</span><span>+        </span><span style="color:#65737e">// });</span><span>
</span><span>+        </span><span style="color:#d08770">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> {
</span>           forceAlign();
<!-- -->-        });
<span>+        }, </span><span style="color:#d08770">0</span><span>);
</span><span>       } </span><span style="color:#b48ead">else</span><span> {
</span><span>         goNextStatus(</span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> (</span><span class="hljs-function">) </span><span>{
</span><span>           </span><span style="color:#b48ead">var</span><span> _prepareResolveRef$cu;
</span></code></pre>
<h3>Angular åº”ç”¨å¸è½½åé‡æ–°æŒ‚è½½</h3>
<p>è¿™æ˜¯åœ¨<code>Umi</code>ä¸‹æ‰ä¼šè§¦å‘çš„é—®é¢˜ï¼Œç›´æ¥ä½¿ç”¨<code>qiankun</code>ä¸ä¼šè§¦å‘ï¼Œå¤§æ¦‚çœ‹äº†ä¸€ä¸‹æºç ï¼Œ<code>Umi</code>æ˜¯é€šè¿‡<code>qiankun</code>çš„<code>loadMicroApp</code>æ¥åŠ è½½å­åº”ç”¨çš„ï¼Œåœ¨æ‰§è¡Œå¸è½½æ“ä½œä¹‹å‰ï¼Œ<code>Angular</code>åº”ç”¨å·²ç»ç›‘å¬åˆ°äº†è·¯ç”±å˜åŒ–ï¼Œå¹¶ä¸”ä¸çŸ¥é“ç”±äºä»€ä¹ˆåŸå› åœ¨å¸è½½ä¹‹ååˆé‡æ–°æ¸²æŸ“äº†ã€‚è¿™ä¸ªé—®é¢˜ä¸€ç›´æ‰¾ä¸åˆ°æ ¹æœ¬è§£å†³æ–¹æ¡ˆï¼Œæš‚æ—¶ç”¨ä¸€ä¸ªä¸´æ—¶è§£å†³åŠæ³•è§£å†³äº†ã€‚</p>
<p>åœ¨<code>Angular</code>åº”ç”¨çš„<code>App</code>ç»„ä»¶ä¸­ç›‘å¬<code>Location</code>å˜åŒ–ï¼Œå½“è·¯ç”±éæœ¬åº”ç”¨åŸºç¡€è·¯å¾„æ—¶ï¼Œè°ƒç”¨<code>router</code>çš„<code>dispose</code>æ–¹æ³•æ‰‹åŠ¨é”€æ¯è·¯ç”±å™¨ã€‚</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span> </span><span class="hljs-function" style="color:#8fa1b3">constructor</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">
</span><span class="hljs-function" style="color:#d08770">    </span><span class="hljs-function" style="color:#b48ead">private</span><span class="hljs-function" style="color:#d08770"> location: Location,
</span><span class="hljs-function" style="color:#d08770">    </span><span class="hljs-function" style="color:#b48ead">private</span><span class="hljs-function" style="color:#d08770"> router: Router
</span><span class="hljs-function" style="color:#d08770">  </span><span class="hljs-function">)</span><span> {}
</span>
<span>  ngOnInit(): </span><span style="color:#d08770">void</span><span> {
</span><span>    </span><span style="color:#d08770">this</span><span>.location.subscribe(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">change</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>      </span><span style="color:#65737e">// Angularåº”ç”¨å¸è½½åè·¯ç”±ä¼šå“åº”å¹¶ä½¿åº”ç”¨é‡æ–°æŒ‚è½½ï¼Œè·³å‡ºå­åº”ç”¨å‰å…ˆæŠŠrouteré”€æ¯</span><span>
</span><span>      </span><span style="color:#b48ead">if</span><span> (change.type === </span><span style="color:#a3be8c">&quot;popstate&quot;</span><span> &amp;&amp; !change.url.includes(</span><span style="color:#a3be8c">&quot;/v1&quot;</span><span>)) {
</span><span>        </span><span style="color:#d08770">this</span><span>.router.dispose();
</span>      }
<!-- -->    });
<!-- -->  }
</code></pre>
<h3>å­åº”ç”¨é™æ€æ–‡ä»¶è®¿é—®å¼‚å¸¸</h3>
<ol>
<li>ç¡®ä¿å­åº”ç”¨ä½¿ç”¨æ­£ç¡®çš„è·¯å¾„å¼•å…¥å›¾ç‰‡ï¼Œç”±äºé…ç½®äº† base-href ä¸ºé<code>/</code>ï¼Œä¸èƒ½ä½¿ç”¨ç»å¯¹è·¯å¾„</li>
</ol>
<p>åœ¨htmlä½¿ç”¨</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#b48ead">const</span><span> logo = </span><span style="color:#d08770">require</span><span>(</span><span style="color:#a3be8c">&quot;src/assets/dashboard-users.svg&quot;</span><span>).default;
</span></code></pre>
<p>åœ¨CSSä¸­ä½¿ç”¨</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>	</span><span style="color:#ebcb8b">background-image</span><span>: </span><span style="color:#d08770">url</span><span>(</span><span style="color:#a3be8c">&#x27;~/assets/img/pro.svg&#x27;</span><span>);
</span></code></pre>
<ol start="2">
<li>é…ç½®å¯åŠ¨å‘½ä»¤<code>ng serve</code>çš„å‚æ•°<code>--deploy-url</code>ä¸ºå½“å‰è¿è¡Œçš„åœ°å€å¦‚ä¸‹ï¼Œä¸”å°†<code>ng build</code>çš„<code>--deploy-url</code>é…ç½®ä¸ºæœåŠ¡å™¨å­ç›®å½•åç§°ã€‚</li>
</ol>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>ng serve ... --deploy-url </span><span style="color:#65737e">//localhost:8002/</span><span>
</span></code></pre>
<h3>è·¯ç”±å›é€€å¼‚å¸¸</h3>
<p>åŸå› ä¹Ÿæ˜¯<code> Angular åº”ç”¨å¸è½½åé‡æ–°æŒ‚è½½</code>ï¼Œè§£å†³å¸è½½ä¹‹åé‡æ–°æŒ‚è½½çš„é—®é¢˜å³å¯ã€‚</p>
<h3>ä½¿ç”¨<code>experimentalStyleIsolation</code>è®¾ç½®æ ·å¼éš”ç¦»ä¹‹åï¼Œå­åº”ç”¨çš„åº”ç”¨å¯¹å…¨å±€æµ®å±‚ä¸‹çš„å…ƒç´ ä¸èµ·ä½œç”¨</h3>
<p>åŸå› æ˜¯ç”Ÿæˆçš„æ ·å¼é€‰æ‹©å™¨å…¨éƒ¨éƒ½æ˜¯åœ¨å­åº”ç”¨rootå…ƒç´ ä¸‹ç”Ÿæ•ˆï¼Œå­åº”ç”¨çš„å…¨å±€æµ®å±‚é»˜è®¤æ¸²æŸ“åœ¨bodyä¸‹ï¼Œå› æ­¤éœ€è¦å°†æµ®å±‚çš„é»˜è®¤å®¹å™¨æ¸²æŸ“åœ¨å­åº”ç”¨çš„rootå…ƒç´ ä¸‹ã€‚</p>
<p>åœ¨<code>angular</code>ä½¿ç”¨äº†<code>ng-zorro</code>ç»„ä»¶åº“ï¼Œæ˜¯ä½¿ç”¨<code>angular/cdk</code>çš„<code>overlay</code>æ¥åšæµ®å±‚ç®¡ç†çš„ï¼Œå¯ä»¥è¿™æ ·è‡ªå®šä¹‰<code>overlay</code>å®¹å™¨ï¼š</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#b48ead">import</span><span> { Inject, Injectable, OnDestroy } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;@angular/core&quot;</span><span>;
</span><span></span><span style="color:#b48ead">import</span><span> { OverlayContainer } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;@angular/cdk/overlay&quot;</span><span>;
</span><span></span><span style="color:#b48ead">import</span><span> { Platform } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;@angular/cdk/platform&quot;</span><span>;
</span><span></span><span style="color:#b48ead">import</span><span> { DOCUMENT } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;@angular/common&quot;</span><span>;
</span>
<span></span><span style="color:#d08770">@Injectable</span><span>()
</span><span></span><span style="color:#b48ead">export</span><span> </span><span class="hljs-class" style="color:#b48ead">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#8fa1b3">AppOverlayContainer</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#b48ead">extends</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#8fa1b3">OverlayContainer</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#8fa1b3">implements</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#8fa1b3">OnDestroy</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span class="hljs-function" style="color:#8fa1b3">constructor</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">@Inject</span><span class="hljs-function" style="color:#d08770">(DOCUMENT) </span><span class="hljs-function" style="color:#d08770">document</span><span class="hljs-function" style="color:#d08770">: Document, _platform: Platform</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#d08770">super</span><span>(</span><span style="color:#d08770">document</span><span>, _platform);
</span>  }
<!-- -->
<span>  </span><span style="color:#b48ead">protected</span><span> _createContainer(): </span><span style="color:#d08770">void</span><span> {
</span><span>    </span><span style="color:#d08770">super</span><span>._createContainer();
</span><span>    </span><span style="color:#b48ead">if</span><span> (!</span><span style="color:#d08770">this</span><span>._containerElement) {
</span><span>      </span><span style="color:#b48ead">return</span><span>;
</span>    }
<span>    </span><span style="color:#b48ead">const</span><span> parent = </span><span style="color:#d08770">document</span><span>.querySelector(</span><span style="color:#a3be8c">&quot;app-root&quot;</span><span>) || </span><span style="color:#d08770">document</span><span>.body;
</span><span>    parent.appendChild(</span><span style="color:#d08770">this</span><span>._containerElement);
</span>  }
<!-- -->
<span>  ngOnDestroy(): </span><span style="color:#d08770">void</span><span> {
</span><span>    </span><span style="color:#d08770">super</span><span>.ngOnDestroy();
</span><span>    </span><span style="color:#d08770">this</span><span>._containerElement = </span><span style="color:#d08770">null</span><span>;
</span>  }
<!-- -->}
<!-- -->
</code></pre>
<p>åœ¨<code>AppModule</code>ä¸‹ä½¿ç”¨ä¾èµ–</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#d08770">@NgModule</span><span>({
</span><span>  </span><span style="color:#65737e">// ...</span><span>
</span><span>  </span><span class="hljs-attr">providers</span><span>: [
</span>    {
<span>      </span><span class="hljs-attr">provide</span><span>: OverlayContainer,
</span><span>      </span><span class="hljs-attr">useClass</span><span>: AppOverlayContainer,
</span>    },
<!-- -->  ],
<!-- -->})
</code></pre>
<h2>Demo åœ°å€</h2>
<p><a href="https://github.com/hmilin/umi-qiankun-with-angular">https://github.com/hmilin/umi-qiankun-with-angular</a></p>
<h2>å‚è€ƒæ–‡æ¡£</h2>
<p><a href="https://single-spa.js.org/docs">single-spa</a></p>
<p><a href="https://qiankun.umijs.org/">qiankun</a></p>
<p><a href="https://v3.umijs.org/zh-CN/plugins/plugin-qiankun">@umijs/plugin-qiankun</a></p></div><div class="content-container"></div></main><footer class="grid place-items-center pb-4"><a href="https://github.com/hmilin" target="_blank" rel="noreferrer noopener">ğŸ˜˜Github</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    code: \"code\",\n    h2: \"h2\",\n    h3: \"h3\",\n    blockquote: \"blockquote\",\n    ol: \"ol\",\n    li: \"li\",\n    pre: \"pre\",\n    a: \"a\",\n    ul: \"ul\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"å¾®å‰ç«¯æ¡†æ¶ qiankun å®è·µ\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æœ€è¿‘æŠŠä¸€ä¸ªå¹´ä»£è¾ƒä¹…çš„\", _jsx(_components.code, {\n        children: \"Angular\"\n      }), \"åº”ç”¨é‡æ„æˆ\", _jsx(_components.code, {\n        children: \"React\"\n      }), \"ï¼Œåˆ†äº†äº”å…­ä¸ªè¿­ä»£ä¸€æ­¥æ­¥é‡å†™ï¼Œç»ˆäºå…¨éƒ¨å®Œæˆæ›¿æ¢ã€‚ç”¨è¿™ç¯‡åšå®¢è®°å½•ä¸€ä¸‹ç¢°åˆ°çš„é—®é¢˜ã€‚\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ä¸ºä»€ä¹ˆéœ€è¦å¾®å‰ç«¯æ¡†æ¶?\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"èåˆä¸åŒå‰ç«¯æŠ€æœ¯æ ˆçš„é¡¹ç›®\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ç°å¦‚ä»Šå‰ç«¯æ¡†æ¶ä¸»è¦æœ‰\", _jsx(_components.code, {\n        children: \"Angular\"\n      }), \"ã€\", _jsx(_components.code, {\n        children: \"React\"\n      }), \"å’Œ \", _jsx(_components.code, {\n        children: \"Vue\"\n      }), \"ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½æœ‰å¾ˆå¤šå‘¨è¾¹å·¥å…·ï¼Œæˆ‘ç¢°åˆ°çš„ä¸»è¦æœ‰ä¸¤ç§åœºæ™¯éœ€è¦åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆï¼š\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ä¸€æ˜¯æŠ€æœ¯æ ˆè½¬å‹ï¼Œç”±äºç§ç§åŸå› è¦ä»ä¸€ä¸ªæŠ€æœ¯æ ˆè½¬æ¢åˆ°å¦ä¸€ä¸ªæŠ€æœ¯æ ˆï¼Œä½†æ˜¯åˆæ²¡åŠæ³•å…¨éƒ¨ä»£ç ä¸€æ¬¡æ€§é‡æ„ï¼Œå¾®å‰ç«¯æ˜¯ä¸€ç§éå¸¸å¥½çš„å®æ–½æ¸è¿›å¼é‡æ„çš„æ‰‹æ®µå’Œç­–ç•¥ã€‚\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"äºŒæ˜¯å·¥å…·ä½¿ç”¨ä¾èµ–äºæŠ€æœ¯æ ˆï¼Œå‡å¦‚ä½ æƒ³å¼•å…¥ä¸€ä¸ªè¡¨å•ç”Ÿæˆå¼•æ“æˆ–å›¾å¯è§†åŒ–å·¥å…·ï¼Œä½†è¿™äº›å·¥å…·ä¾èµ–äºå¦ä¸€ä¸ªæŠ€æœ¯æ ˆï¼Œåœ¨å½“å‰ä½¿ç”¨çš„æŠ€æœ¯æ ˆç”Ÿæ€ä¸­æ²¡æœ‰æ›´å¥½çš„äº§å“æ›¿ä»£ï¼Œè¿™ç§æ—¶å€™ä¹Ÿå¯ä»¥è€ƒè™‘å¦èµ·ä¸€ä¸ªå¾®é¡¹ç›®æ¥å®ç°è¿™ä¸€æ¨¡å—çš„åŠŸèƒ½ã€‚\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"è§£å†³å•ä½“é¡¹ç›®çš„ä¸å¯ç»´æŠ¤æ€§\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"å¾®å‰ç«¯æ¶æ„æ—¨åœ¨è§£å†³å•ä½“åº”ç”¨åœ¨ä¸€ä¸ªç›¸å¯¹é•¿çš„æ—¶é—´è·¨åº¦ä¸‹ï¼Œç”±äºå‚ä¸çš„äººå‘˜ã€å›¢é˜Ÿçš„å¢å¤šã€å˜è¿ï¼Œä»ä¸€ä¸ªæ™®é€šåº”ç”¨æ¼”å˜æˆä¸€ä¸ªå·¨çŸ³åº”ç”¨(Frontend Monolith)åï¼Œéšä¹‹è€Œæ¥çš„åº”ç”¨ä¸å¯ç»´æŠ¤çš„é—®é¢˜ã€‚è¿™ç±»é—®é¢˜åœ¨ä¼ä¸šçº§ Web åº”ç”¨ä¸­å°¤å…¶å¸¸è§ã€‚\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"qiankun å¯ä»¥å°†ä¸€ä¸ªä¸šåŠ¡å¤æ‚çš„é¡¹ç›®åˆ†ä¸ºå¤šä¸ªå­åº”ç”¨ï¼Œæ¯ä¸ªå­åº”ç”¨ç‹¬ç«‹å¼€å‘ç‹¬ç«‹éƒ¨ç½²ï¼Œéƒ¨ç½²å®Œæˆåä¸»åº”ç”¨è‡ªåŠ¨å®ŒæˆåŒæ­¥æ›´æ–°ã€‚\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"å®è·µèƒŒæ™¯\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æœ¬æ¬¡ä½¿ç”¨ qiankun ç›®çš„æ˜¯å°†\", _jsx(_components.code, {\n        children: \"Angular\"\n      }), \" çš„é¡¹ç›®è½¬æˆ Reactã€‚Angular é¡¹ç›®ä½¿ç”¨çš„æ˜¯\", _jsx(_components.code, {\n        children: \"Angular@9.x\"\n      }), \"ï¼Œæ˜¯ä¸ªæ¯”è¾ƒæ—§çš„é¡¹ç›®ï¼Œä¸šåŠ¡æ¯”è¾ƒå¤šï¼Œä»£ç ä¸­å…¨å±€æ ·å¼è¾ƒå¤šä¸”æ¯”è¾ƒæ··ä¹±ã€‚React é¡¹ç›®æ˜¯åŸºäº Umi æ¡†æ¶æ„å»ºçš„ã€‚\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"å¾®å‰ç«¯çš„å·¥ä½œåŸç†\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"å­åº”ç”¨å¯¼å‡ºç”Ÿå‘½å‘¨æœŸä¾›ä¸»åº”ç”¨è°ƒç”¨ã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"æä¾›å­åº”ç”¨ä¸»åº”ç”¨é€šä¿¡æ–¹å¼ã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"JS æ²™ç®±æ¨¡å¼ï¼Œéš”ç»åº”ç”¨ã€‚\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"CSS éš”ç¦»æ–¹æ¡ˆã€‚\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ä¸»åº”ç”¨å’Œå­åº”ç”¨é€‰å–\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ç”±äº\", _jsx(_components.code, {\n        children: \"React\"\n      }), \"é¡¹ç›®æ˜¯æœ€ç»ˆç›®æ ‡ï¼Œå› æ­¤ç›´æ¥å°† React é¡¹ç›®ä½œä¸ºä¸»åº”ç”¨ï¼Œ\", _jsx(_components.code, {\n        children: \"Angular\"\n      }), \"é¡¹ç›®æ”¹é€ ä¸ºå­åº”ç”¨ï¼Œå†æŒ‰æ¨¡å—æ¥é‡æ„ï¼Œé€æ­¥æ›¿æ¢ã€‚\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"React ä¸»åº”ç”¨é…ç½®\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ç”±äº React é¡¹ç›®æ˜¯ä½¿ç”¨äº†\", _jsx(_components.code, {\n        children: \"Umi\"\n      }), \"ï¼Œ\", _jsx(_components.code, {\n        children: \"Umi\"\n      }), \"è‡ªèº«æä¾›äº†\", _jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"çš„æ’ä»¶\", _jsx(_components.code, {\n        children: \"@umijs/plugin-qiankun\"\n      }), \"ï¼Œå¼€å¯\", _jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"åªéœ€è¦å°‘é‡çš„é…ç½®ã€‚\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"å®‰è£…æ’ä»¶\", _jsx(_components.code, {\n            children: \"@umijs/plugin-qiankun\"\n          })]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"åœ¨\", _jsx(_components.code, {\n            children: \"config.ts\"\n          }), \"ä¸­é…ç½®å­åº”ç”¨\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"qiankun: {\\n\\tmaster: {\\n\\t\\tapps: [\\n\\t\\t\\t{\\n\\t\\t\\t\\tname: 'angular9',\\n\\t\\t\\t\\tentry: 'http://localhost:8001', // å…¥å£\\n\\t\\t\\t\\t// å¯æ”¾ä¸€äº›é™æ€çš„å‚æ•°ä¼ ç»™å­åº”ç”¨\\n\\t\\t\\t\\tprops: {\\n\\t\\t\\t\\t\\ttestProp1: 'test1',\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t],\\n\\t\\tprefetch: 'all',\\n\\t\\tsandbox: {\\n\\t\\t\\tstrictStyleIsolation: false,\\n\\t\\t\\texperimentalStyleIsolation: true,\\n\\t\\t},\\n\\t},\\n},\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"3\",\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ç»™å­åº”ç”¨åˆ†é…è·¯ç”±\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"routes: [\\n\\t{\\n\\t\\tpath: '/',\\n\\t\\tcomponent: '@/layouts',\\n\\t\\troutes: [\\n\\t\\t\\t// other\\n\\t\\t\\t{\\n\\t\\t\\t\\tpath: 'v1',\\n\\t\\t\\t\\tmicroApp: 'angular9', // ä¸Šé¢çš„å­åº”ç”¨çš„åå­—\\n\\t\\t\\t\\tmicroAppProps: {\\n\\t\\t\\t\\t\\tautoSetLoading: false, // æ˜¯å¦å¼€å¯loadingåŠ¨ç”»\\n\\t\\t\\t\\t\\tclassName: 'appClassName',\\n\\t\\t\\t\\t\\twrapperClassName: 'wrapperClass',\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\t// other\\n\\t\\t],\\n\\t},\\n],\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"è¿™é‡Œä½¿ç”¨çš„æ˜¯è·¯ç”±ç»‘å®šçš„æ–¹å¼ï¼Œ\", _jsx(_components.code, {\n        children: \"@umijs/plugin-qiankun\"\n      }), \"è¿˜æä¾›äº†ç»„ä»¶\", _jsx(_components.code, {\n        children: \"\u003cMicroApp /\u003e\"\n      }), \"æ¥å¼•å…¥å­åº”ç”¨ï¼Œç»„ä»¶å¼•å…¥çš„æ–¹å¼é€‚åˆä¸å¸¦è·¯ç”±çš„å­åº”ç”¨ã€‚\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"4\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"å¼•å…¥\", _jsx(_components.code, {\n          children: \"Zone.js\"\n        })]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"Angular\"\n      }), \"çš„è„æ•°æ®æ£€æµ‹ä¾èµ–\", _jsx(_components.code, {\n        children: \"Zone.js\"\n      }), \"ï¼Œå½“ä¸€ä¸ªé¡µé¢ä¸Šå­˜åœ¨å¤šä¸ª\", _jsx(_components.code, {\n        children: \"Zone\"\n      }), \"å®ä¾‹æ—¶ï¼Œ\", _jsx(_components.code, {\n        children: \"Zone.js\"\n      }), \"ä¼šæŠ›å‡ºé”™è¯¯ã€‚å› æ­¤ä¸ºç¡®ä¿é¡µé¢ä¸Šåªè¿è¡Œä¸€ä¸ª\", _jsx(_components.code, {\n        children: \"Zone\"\n      }), \"å®ä¾‹ï¼Œç»Ÿä¸€åœ¨ä¸»åº”ç”¨å¼•å…¥\", _jsx(_components.code, {\n        children: \"Zone.js\"\n      }), \"ã€‚\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Angular å­åº”ç”¨é…ç½®\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æ³¨ï¼š\", _jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"å®˜æ–¹æ–‡æ¡£ä¸­çš„\", _jsx(_components.code, {\n        children: \"Angular\"\n      }), \"å­åº”ç”¨é…ç½®æ˜¯æ—§ç‰ˆæœ¬ï¼Œæœ€æ–°ç‰ˆæœ¬çš„åº”å‚è€ƒ github ä»“åº“\", _jsx(_components.a, {\n        href: \"https://github.com/umijs/qiankun/tree/master/examples/angular9%E3%80%82\",\n        children: \"https://github.com/umijs/qiankun/tree/master/examples/angular9ã€‚\"\n      })]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"å®‰è£…éœ€è¦çš„æ’ä»¶\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-shell\",\n        children: \"yarn add -D @angular-builders/custom-webpack\\nyarn add single-spa single-spa-angular\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"Angular\"\n          }), \"æ˜¯ä½¿ç”¨\", _jsx(_components.code, {\n            children: \"Webpack\"\n          }), \"æ„å»ºï¼Œå¸¸è§„çš„é…ç½®åœ¨\", _jsx(_components.code, {\n            children: \"angular.json\"\n          }), \"æŒ‡å®šï¼Œä½¿ç”¨\", _jsx(_components.code, {\n            children: \"@angular-builders/custom-webpack\"\n          }), \"å¯ä»¥æ‰©å±•å…¶ä»–\", _jsx(_components.code, {\n            children: \"Webpack\"\n          }), \"é…ç½®ã€‚\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"single-spa-angular\"\n          }), \"æ˜¯\", _jsx(_components.code, {\n            children: \"single-spa\"\n          }), \"å®˜æ–¹æä¾›çš„ï¼Œä½¿ç”¨å®ƒå¯ä»¥å¿«é€Ÿçš„é…ç½®ç”Ÿå‘½å‘¨æœŸçš„å¯¼å‡ºå’Œ\", _jsx(_components.code, {\n            children: \"Webpack\"\n          }), \"é…ç½®ã€‚\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"2\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"åœ¨\", _jsx(_components.code, {\n          children: \"main.ts\"\n        }), \"ä¸­é…ç½®å…¥å£åŠ è½½å’Œç”Ÿå‘½å‘¨æœŸå¯¼å‡º\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"+ import { singleSpaAngular, getSingleSpaExtraProviders } from 'single-spa-angular';\\n+ import { singleSpaPropsSubject } from './single-spa/single-spa-props';\\n\\n// åªåœ¨éqiankunå­åº”ç”¨ç¯å¢ƒä¸‹æ‰§è¡Œ\\n+\\tif (!(window as any).__POWERED_BY_QIANKUN__) {\\n\\t\\tplatformBrowserDynamic()\\n\\t\\t\\t.bootstrapModule(AppModule)\\n\\t\\t\\t.catch(err =\u003e console.error(err));\\n+\\t}\\n\\n+ const { bootstrap, mount, unmount } = singleSpaAngular({\\n+   bootstrapFunction: singleSpaProps =\u003e {\\n+\\t \\t// ä¸»åº”ç”¨å‘å­åº”ç”¨ä¼ å‚\\n+     singleSpaPropsSubject.next(singleSpaProps);\\n+     return platformBrowserDynamic(getSingleSpaExtraProviders()).bootstrapModule(AppModule);\\n+   },\\n+   template: '\u003capp-root /\u003e',\\n+   Router,\\n+   NgZone: NgZone,\\n+ });\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"3\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"é…ç½®è·¯ç”± baseï¼Œä¿®æ”¹\", _jsx(_components.code, {\n          children: \"app-routing.module.ts\"\n        })]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"@NgModule({\\n  ...\\n  providers: [\\n    {\\n      provide: APP_BASE_HREF,\\n      useValue: (window as any).__POWERED_BY_QIANKUN__ ? '/v1' : '/',\\n    },\\n  ],\\n})\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"4\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"æ³¨é‡Šæ‰\", _jsx(_components.code, {\n          children: \"zone.js\"\n        }), \"çš„å¼•å…¥\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"æ³¨é‡Šæ‰\", _jsx(_components.code, {\n        children: \"polyfills.ts\"\n      }), \"ä¸­çš„\", _jsx(_components.code, {\n        children: \"zone.js\"\n      }), \"å¼•å…¥\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"// import 'zone.js/dist/zone'; // Included with Angular CLI.\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨\", _jsx(_components.code, {\n        children: \"index.html\"\n      }), \"ä¸­å¼•å…¥ï¼Œé€‚é…å­åº”ç”¨å•ç‹¬è¿è¡Œ\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"\u003chead\u003e\\n \u003cscript src=\\\"https://unpkg.com/zone.js\\\" ignore\u003e\u003c/script\u003e\\n\u003c/head\u003e\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"å¾®å‰ç«¯å¸¸è§é—®é¢˜\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"çˆ¶å­åº”ç”¨é—´é€šä¿¡\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"Umi\"\n      }), \"å¯¹\", _jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"çš„\", _jsx(_components.code, {\n        children: \"initGlobalState\"\n      }), \"ç»“åˆ\", _jsx(_components.code, {\n        children: \"initial-state\"\n      }), \"æ’ä»¶åšäº†å°è£…ï¼Œåªéœ€åœ¨å…¥å£ç®€å•é…ç½®ï¼Œå³å¯ä½¿ç”¨\", _jsx(_components.code, {\n        children: \"useModel\"\n      }), \"æ¥è·Ÿå­åº”ç”¨é€šä¿¡ã€‚åœ¨\", _jsx(_components.code, {\n        children: \"Angular\"\n      }), \"å­åº”ç”¨ä¸­å³é€šè¿‡\", _jsx(_components.code, {\n        children: \"single-spa\"\n      }), \"æ’ä»¶å¯¼å‡ºæ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸå¹¶è·å–ä¸»åº”ç”¨å…±äº«çš„çŠ¶æ€ã€‚\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ä¸»åº”ç”¨é…ç½®\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ä¿®æ”¹\", _jsx(_components.code, {\n        children: \"app.ts\"\n      })]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"// ç»™è·¯ç”±ç»‘å®šçš„å¾®åº”ç”¨ä¼ å€¼\\nexport function useQiankunStateForSlave() {\\n  const [masterState, setMasterState] = useState\u003cMasterState\u003e({});\\n\\n  return {\\n    masterState,\\n    setMasterState,\\n  };\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ç»„ä»¶ä¸­æ‹¿å€¼å’Œä¼ å€¼\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"import { useModel } from 'umi';\\n\\nconst Layout: React.FC\u003cLayoutProps\u003e = ({ children }) =\u003e {\\n  const { masterState, setMasterState } = useModel('@@qiankunStateForSlave');\\n\\n  const { data: user } = useRequest(fetchUser);\\n\\n  useEffect(() =\u003e {\\n    if (user) {\\n      setMasterState({ user });\\n    }\\n  }, [user]);\\n\\n\\t// ...\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"2\",\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"å­åº”ç”¨é…ç½®\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"main.ts\"\n      }), \"ä¸­å¯¼å‡º\", _jsx(_components.code, {\n        children: \"update\"\n      }), \"ç”Ÿå‘½å‘¨æœŸ\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"const { bootstrap, mount, unmount, update } = singleSpaAngular({\\n  // ...,\\n  updateFunction: (singleSpaProps: SingleSpaProps) =\u003e {\\n    console.log(\\\"update singleSpaProps\\\", singleSpaProps);\\n    singleSpaPropsSubject.next(singleSpaProps);\\n    return Promise.resolve();\\n  },\\n\\t// ...\\n});\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ç»„ä»¶ä¸­è·å–\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"export class AppComponent implements OnInit, OnDestroy {\\n\\t// ...\\n\\tngOnInit(): void {\\n\\t\\t// ç›‘å¬ä¸»åº”ç”¨å…±äº«æ•°æ®æ›´æ–°\\n    singleSpaPropsSubject.pipe(takeUntil(this.destroy)).subscribe((props) =\u003e {\\n      const { user } = props.masterState ?? {};\\n      if (user) {\\n        this.authService.user.next(user);\\n      }\\n    });\\n\\t}\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨\", _jsx(_components.code, {\n        children: \"single-spa-props.ts\"\n      }), \"ä¸­å¯¼å‡ºä¸€ä¸ªæ–¹æ³•ç”¨äºç»™çˆ¶ç»„ä»¶ä¼ å€¼\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"// å‘çˆ¶ç»„ä»¶ä¼ å€¼\\nexport const setMasterState = (state: Partial\u003cMasterState\u003e) =\u003e {\\n  singleSpaPropsSubject.pipe(take(1)).subscribe((props) =\u003e {\\n    props.setMasterState({ ...props.masterState, ...state });\\n  });\\n};\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"æ ·å¼éš”ç¦»\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"æä¾›äº†ä¸¤ç§æ ·å¼éš”ç¦»æ–¹æ¡ˆï¼Œé€šè¿‡é…ç½®\", _jsx(_components.code, {\n        children: \"sandbox\"\n      }), \"æ¥å¼€å¯æ ·å¼éš”ç¦»ã€‚\", _jsx(_components.code, {\n        children: \"strictStyleIsolation\"\n      }), \"ä¸º\", _jsx(_components.code, {\n        children: \"true\"\n      }), \"è¡¨ç¤ºå¼€å¯\", _jsx(_components.code, {\n        children: \"ShadowDom\"\n      }), \"\\tçš„ä¸¥æ ¼æ ·å¼éš”ç¦»ï¼Œè¿™ç§æ¨¡å¼ä¸‹\", _jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"ä¼šä¸ºæ¯ä¸ªå¾®åº”ç”¨çš„å®¹å™¨åŒ…è£¹ä¸Šä¸€ä¸ª\", _jsx(_components.code, {\n        children: \"shadow dom\"\n      }), \"èŠ‚ç‚¹ã€‚\", _jsx(_components.code, {\n        children: \"experimentalStyleIsolation\"\n      }), \"æ˜¯\", _jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"æä¾›çš„ä¸€ä¸ªå®éªŒæ€§çš„æ ·å¼éš”ç¦»ç‰¹æ€§ï¼Œä¼šç»™æ¯ä¸ªå­åº”ç”¨çš„æ ·å¼å¤šå¥—ä¸€å±‚æ ¹é€‰æ‹©å™¨æ¥è¾¾åˆ°å­åº”ç”¨é—´æ ·å¼éš”ç¦»çš„æ•ˆæœã€‚\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"ShadowDom\"\n      }), \"æ–¹æ¡ˆéœ€è¦æ ¹æ®ä¸åŒæ¡†æ¶å»åšæ”¹é€ å’Œé€‚é…æ‰èƒ½ç”¨èµ·æ¥ï¼Œæ‰€ä»¥é¡¹ç›®ä¸­ä½¿ç”¨äº†ç¬¬äºŒç§æ–¹æ¡ˆã€‚\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"éƒ¨ç½²é…ç½®\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨åšå¾®å‰ç«¯æ”¹é€ ä¹‹å‰ï¼Œæœ¬é¡¹ç›®æ˜¯ä»¥\", _jsx(_components.code, {\n        children: \"Nginx\"\n      }), \"ä½œä¸ºæœåŠ¡å™¨ï¼Œå› æ­¤åªéœ€è¦æ ¹æ®å­åº”ç”¨è·¯ç”±çš„å®šä¹‰ï¼Œåœ¨Nginxä¸ŠåŠ ä¸€ä¸ªè½¬å‘è§„åˆ™ï¼Œè½¬åˆ°å­åº”ç”¨çš„æ–‡ä»¶ç›®å½•å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­åº”ç”¨çš„å…¥å£é…ç½®éœ€è¦å’Œ\", _jsx(_components.code, {\n        children: \"Nginx\"\n      }), \"ä¸Šçš„è·¯å¾„é…ç½®ä¿æŒä¸€è‡´ã€‚\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"qiankun: {\\n    master: {\\n      apps: [\\n        {\\n          name: 'angular9',\\n          entry:\\n            process.env.NODE_ENV === 'development'\\n              ? 'http://localhost:8001'\\n              : '/v1/',\\n        },\\n      ],\\n      // ...\\n    },\\n  },\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ç¢°åˆ°çš„å‘\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"antd popover å¯¼è‡´é¡µé¢å´©æºƒ\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ç»è¿‡æ’æŸ¥æ˜¯\", _jsx(_components.code, {\n        children: \"antd\"\n      }), \"çš„åŸºç¡€ç»„ä»¶\", _jsx(_components.code, {\n        children: \"rc-trigger@5.2.10\"\n      }), \"çš„é—®é¢˜ï¼Œåœ¨æœ€è¿‘å‘å¸ƒçš„æ–°ç‰ˆæœ¬ä¸­å·²ç»ä¿®å¤äº†æ”¹é—®é¢˜ï¼Œåœ¨ä¿®å¤ä¹‹å‰æ˜¯é€šè¿‡\", _jsx(_components.code, {\n        children: \"patches\"\n      }), \"æ¥ä¿®æ”¹åŒ…çš„æºä»£ç ã€‚\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"diff --git a/node_modules/rc-trigger/es/Popup/PopupInner.js b/node_modules/rc-trigger/es/Popup/PopupInner.js\\nindex aacf97b..8ebea1b 100644\\n--- a/node_modules/rc-trigger/es/Popup/PopupInner.js\\n+++ b/node_modules/rc-trigger/es/Popup/PopupInner.js\\n@@ -82,9 +82,12 @@ var PopupInner = /*#__PURE__*/React.forwardRef(function (props, ref) {\\n     if (status === 'align') {\\n       // Repeat until not more align needed\\n       if (alignedClassName !== nextAlignedClassName) {\\n-        Promise.resolve().then(function () {\\n+        // Promise.resolve().then(function () {\\n+        //   forceAlign();\\n+        // });\\n+        setTimeout(() =\u003e {\\n           forceAlign();\\n-        });\\n+        }, 0);\\n       } else {\\n         goNextStatus(function () {\\n           var _prepareResolveRef$cu;\\ndiff --git a/node_modules/rc-trigger/lib/Popup/PopupInner.js b/node_modules/rc-trigger/lib/Popup/PopupInner.js\\nindex b603854..7daa11b 100644\\n--- a/node_modules/rc-trigger/lib/Popup/PopupInner.js\\n+++ b/node_modules/rc-trigger/lib/Popup/PopupInner.js\\n@@ -102,9 +102,12 @@ var PopupInner = /*#__PURE__*/React.forwardRef(function (props, ref) {\\n     if (status === 'align') {\\n       // Repeat until not more align needed\\n       if (alignedClassName !== nextAlignedClassName) {\\n-        Promise.resolve().then(function () {\\n+        // Promise.resolve().then(function () {\\n+        //   forceAlign();\\n+        // });\\n+        setTimeout(() =\u003e {\\n           forceAlign();\\n-        });\\n+        }, 0);\\n       } else {\\n         goNextStatus(function () {\\n           var _prepareResolveRef$cu;\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Angular åº”ç”¨å¸è½½åé‡æ–°æŒ‚è½½\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"è¿™æ˜¯åœ¨\", _jsx(_components.code, {\n        children: \"Umi\"\n      }), \"ä¸‹æ‰ä¼šè§¦å‘çš„é—®é¢˜ï¼Œç›´æ¥ä½¿ç”¨\", _jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"ä¸ä¼šè§¦å‘ï¼Œå¤§æ¦‚çœ‹äº†ä¸€ä¸‹æºç ï¼Œ\", _jsx(_components.code, {\n        children: \"Umi\"\n      }), \"æ˜¯é€šè¿‡\", _jsx(_components.code, {\n        children: \"qiankun\"\n      }), \"çš„\", _jsx(_components.code, {\n        children: \"loadMicroApp\"\n      }), \"æ¥åŠ è½½å­åº”ç”¨çš„ï¼Œåœ¨æ‰§è¡Œå¸è½½æ“ä½œä¹‹å‰ï¼Œ\", _jsx(_components.code, {\n        children: \"Angular\"\n      }), \"åº”ç”¨å·²ç»ç›‘å¬åˆ°äº†è·¯ç”±å˜åŒ–ï¼Œå¹¶ä¸”ä¸çŸ¥é“ç”±äºä»€ä¹ˆåŸå› åœ¨å¸è½½ä¹‹ååˆé‡æ–°æ¸²æŸ“äº†ã€‚è¿™ä¸ªé—®é¢˜ä¸€ç›´æ‰¾ä¸åˆ°æ ¹æœ¬è§£å†³æ–¹æ¡ˆï¼Œæš‚æ—¶ç”¨ä¸€ä¸ªä¸´æ—¶è§£å†³åŠæ³•è§£å†³äº†ã€‚\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨\", _jsx(_components.code, {\n        children: \"Angular\"\n      }), \"åº”ç”¨çš„\", _jsx(_components.code, {\n        children: \"App\"\n      }), \"ç»„ä»¶ä¸­ç›‘å¬\", _jsx(_components.code, {\n        children: \"Location\"\n      }), \"å˜åŒ–ï¼Œå½“è·¯ç”±éæœ¬åº”ç”¨åŸºç¡€è·¯å¾„æ—¶ï¼Œè°ƒç”¨\", _jsx(_components.code, {\n        children: \"router\"\n      }), \"çš„\", _jsx(_components.code, {\n        children: \"dispose\"\n      }), \"æ–¹æ³•æ‰‹åŠ¨é”€æ¯è·¯ç”±å™¨ã€‚\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \" constructor(\\n    private location: Location,\\n    private router: Router\\n  ) {}\\n\\n  ngOnInit(): void {\\n    this.location.subscribe((change) =\u003e {\\n      // Angularåº”ç”¨å¸è½½åè·¯ç”±ä¼šå“åº”å¹¶ä½¿åº”ç”¨é‡æ–°æŒ‚è½½ï¼Œè·³å‡ºå­åº”ç”¨å‰å…ˆæŠŠrouteré”€æ¯\\n      if (change.type === \\\"popstate\\\" \u0026\u0026 !change.url.includes(\\\"/v1\\\")) {\\n        this.router.dispose();\\n      }\\n    });\\n  }\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"å­åº”ç”¨é™æ€æ–‡ä»¶è®¿é—®å¼‚å¸¸\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"ç¡®ä¿å­åº”ç”¨ä½¿ç”¨æ­£ç¡®çš„è·¯å¾„å¼•å…¥å›¾ç‰‡ï¼Œç”±äºé…ç½®äº† base-href ä¸ºé\", _jsx(_components.code, {\n          children: \"/\"\n        }), \"ï¼Œä¸èƒ½ä½¿ç”¨ç»å¯¹è·¯å¾„\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"åœ¨htmlä½¿ç”¨\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"const logo = require(\\\"src/assets/dashboard-users.svg\\\").default;\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"åœ¨CSSä¸­ä½¿ç”¨\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-css\",\n        children: \"\\tbackground-image: url('~/assets/img/pro.svg');\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"2\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"é…ç½®å¯åŠ¨å‘½ä»¤\", _jsx(_components.code, {\n          children: \"ng serve\"\n        }), \"çš„å‚æ•°\", _jsx(_components.code, {\n          children: \"--deploy-url\"\n        }), \"ä¸ºå½“å‰è¿è¡Œçš„åœ°å€å¦‚ä¸‹ï¼Œä¸”å°†\", _jsx(_components.code, {\n          children: \"ng build\"\n        }), \"çš„\", _jsx(_components.code, {\n          children: \"--deploy-url\"\n        }), \"é…ç½®ä¸ºæœåŠ¡å™¨å­ç›®å½•åç§°ã€‚\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"ng serve ... --deploy-url //localhost:8002/\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"è·¯ç”±å›é€€å¼‚å¸¸\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åŸå› ä¹Ÿæ˜¯\", _jsx(_components.code, {\n        children: \" Angular åº”ç”¨å¸è½½åé‡æ–°æŒ‚è½½\"\n      }), \"ï¼Œè§£å†³å¸è½½ä¹‹åé‡æ–°æŒ‚è½½çš„é—®é¢˜å³å¯ã€‚\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      children: [\"ä½¿ç”¨\", _jsx(_components.code, {\n        children: \"experimentalStyleIsolation\"\n      }), \"è®¾ç½®æ ·å¼éš”ç¦»ä¹‹åï¼Œå­åº”ç”¨çš„åº”ç”¨å¯¹å…¨å±€æµ®å±‚ä¸‹çš„å…ƒç´ ä¸èµ·ä½œç”¨\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"åŸå› æ˜¯ç”Ÿæˆçš„æ ·å¼é€‰æ‹©å™¨å…¨éƒ¨éƒ½æ˜¯åœ¨å­åº”ç”¨rootå…ƒç´ ä¸‹ç”Ÿæ•ˆï¼Œå­åº”ç”¨çš„å…¨å±€æµ®å±‚é»˜è®¤æ¸²æŸ“åœ¨bodyä¸‹ï¼Œå› æ­¤éœ€è¦å°†æµ®å±‚çš„é»˜è®¤å®¹å™¨æ¸²æŸ“åœ¨å­åº”ç”¨çš„rootå…ƒç´ ä¸‹ã€‚\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨\", _jsx(_components.code, {\n        children: \"angular\"\n      }), \"ä½¿ç”¨äº†\", _jsx(_components.code, {\n        children: \"ng-zorro\"\n      }), \"ç»„ä»¶åº“ï¼Œæ˜¯ä½¿ç”¨\", _jsx(_components.code, {\n        children: \"angular/cdk\"\n      }), \"çš„\", _jsx(_components.code, {\n        children: \"overlay\"\n      }), \"æ¥åšæµ®å±‚ç®¡ç†çš„ï¼Œå¯ä»¥è¿™æ ·è‡ªå®šä¹‰\", _jsx(_components.code, {\n        children: \"overlay\"\n      }), \"å®¹å™¨ï¼š\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"import { Inject, Injectable, OnDestroy } from \\\"@angular/core\\\";\\nimport { OverlayContainer } from \\\"@angular/cdk/overlay\\\";\\nimport { Platform } from \\\"@angular/cdk/platform\\\";\\nimport { DOCUMENT } from \\\"@angular/common\\\";\\n\\n@Injectable()\\nexport class AppOverlayContainer extends OverlayContainer implements OnDestroy {\\n  constructor(@Inject(DOCUMENT) document: Document, _platform: Platform) {\\n    super(document, _platform);\\n  }\\n\\n  protected _createContainer(): void {\\n    super._createContainer();\\n    if (!this._containerElement) {\\n      return;\\n    }\\n    const parent = document.querySelector(\\\"app-root\\\") || document.body;\\n    parent.appendChild(this._containerElement);\\n  }\\n\\n  ngOnDestroy(): void {\\n    super.ngOnDestroy();\\n    this._containerElement = null;\\n  }\\n}\\n\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"åœ¨\", _jsx(_components.code, {\n        children: \"AppModule\"\n      }), \"ä¸‹ä½¿ç”¨ä¾èµ–\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"@NgModule({\\n  // ...\\n  providers: [\\n    {\\n      provide: OverlayContainer,\\n      useClass: AppOverlayContainer,\\n    },\\n  ],\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Demo åœ°å€\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://github.com/hmilin/umi-qiankun-with-angular\",\n        children: \"https://github.com/hmilin/umi-qiankun-with-angular\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"å‚è€ƒæ–‡æ¡£\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://single-spa.js.org/docs\",\n        children: \"single-spa\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://qiankun.umijs.org/\",\n        children: \"qiankun\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://v3.umijs.org/zh-CN/plugins/plugin-qiankun\",\n        children: \"@umijs/plugin-qiankun\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"title":"å¾®å‰ç«¯æ¡†æ¶qiankunå®è·µ","description":"åŸºäºqiankunå®ç°Angularå‘Reactçš„æ¸è¿›å¼é‡æ„","public":true,"date":"2022-09-09 12:00:03","cover":"/posts-img/qiankun-logo.png"}},"frontMatter":{"title":"å¾®å‰ç«¯æ¡†æ¶qiankunå®è·µ","description":"åŸºäºqiankunå®ç°Angularå‘Reactçš„æ¸è¿›å¼é‡æ„","public":true,"date":"2022-09-09 12:00:03","cover":"/posts-img/qiankun-logo.png"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"qiankun-practice"},"buildId":"2nKvk5WaOwF93xw62gKAV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>