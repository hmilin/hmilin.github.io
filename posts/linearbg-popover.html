<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Meiling&#x27;s Blog</title><meta name="description" content="meiling的博客"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/56ac636d8286ddc4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/56ac636d8286ddc4.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a85178c7df1bcd20.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a85178c7df1bcd20.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-c50d706355616eef.js" defer=""></script><script src="/_next/static/chunks/framework-a85322f027b40e20.js" defer=""></script><script src="/_next/static/chunks/main-95aa3232ca423ead.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c28c633855fb2140.js" defer=""></script><script src="/_next/static/chunks/495-31a10f133dd42cb0.js" defer=""></script><script src="/_next/static/chunks/785-afa51abc884a1702.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-aa35ebeedcc516ae.js" defer=""></script><script src="/_next/static/Cbc3P-QolF0TorJreHJzQ/_buildManifest.js" defer=""></script><script src="/_next/static/Cbc3P-QolF0TorJreHJzQ/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Layout_container__XDtoS"><header class="Header_header__aO32P"><div class="Header_mobileNav__x8dOm"><div class="Header_menuIcon__zsaJW"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M120-240v-80h720v80zm0-200v-80h720v80zm0-200v-80h720v80z"></path></svg></div><a class="Header_searchBtn__DiCC5" href="/search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580t75.5-184.5T380-840t184.5 75.5T640-580q0 44-14 83t-38 69l252 252zM380-400q75 0 127.5-52.5T560-580t-52.5-127.5T380-760t-127.5 52.5T200-580t52.5 127.5T380-400"></path></svg></a></div><nav class="Header_nav__wk8Zc"><div class="Header_closeIcon__TBNuf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224z"></path></svg></div><a class="Header_searchBtn__DiCC5" href="/search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580t75.5-184.5T380-840t184.5 75.5T640-580q0 44-14 83t-38 69l252 252zM380-400q75 0 127.5-52.5T560-580t-52.5-127.5T380-760t-127.5 52.5T200-580t52.5 127.5T380-400"></path></svg></a><a class="" href="/"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M200-160v-366L88-440l-48-64 440-336 160 122v-82h120v174l160 122-48 64-112-86v366H520v-240h-80v240zm80-80h80v-240h240v240h80v-347L480-739 280-587zm120-319h160q0-32-24-52.5T480-632t-56 20.5-24 52.5m-40 319v-240h240v240-240H360z"></path></svg></div><div class="Header_title__BTC6R">首页</div></a><a class="" href="/category/native"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M200-640v440h560v-440H640v320l-160-80-160 80v-320zm0 520q-33 0-56.5-23.5T120-200v-499q0-14 4.5-27t13.5-24l50-61q11-14 27.5-21.5T250-840h460q18 0 34.5 7.5T772-811l50 61q9 11 13.5 24t4.5 27v499q0 33-23.5 56.5T760-120zm16-600h528l-34-40H250zm184 80v190l80-40 80 40v-190zm-200 0h560z"></path></svg></div><div class="Header_title__BTC6R">原生基础</div></a><a class="" href="/category/framework"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M400-400h160v-80H400zm0-120h320v-80H400zm0-120h320v-80H400zm-80 400q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240zm0-80h480v-480H320zM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80zm160-720v480z"></path></svg></div><div class="Header_title__BTC6R">框架相关</div></a><a class="" href="/category/tool"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="m620-284 56-56q6-6 6-14t-6-14L540-505q4-11 6-22t2-25q0-57-40.5-97.5T410-690q-17 0-34 4.5T343-673l94 94-56 56-94-94q-8 16-12.5 33t-4.5 34q0 57 40.5 97.5T408-412q13 0 24.5-2t22.5-6l137 136q6 6 14 6t14-6M480-80q-83 0-156-31.5T197-197t-85.5-127T80-480t31.5-156T197-763t127-85.5T480-880t156 31.5T763-763t85.5 127T880-480t-31.5 156T763-197t-127 85.5T480-80m0-80q134 0 227-93t93-227-93-227-227-93-227 93-93 227 93 227 227 93m0-320"></path></svg></div><div class="Header_title__BTC6R">工具使用</div></a><a class="" href="/category/performance"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M220-520 80-600v-160l140-80 140 80v160zm0-92 60-34v-68l-60-34-60 34v68zm440 123v-93l140 82v280L560-80 320-220v-280l140-82v93l-60 35v188l160 93 160-93v-188zm-140 89v-480h360l-80 120 80 120H600v240zM220-680"></path></svg></div><div class="Header_title__BTC6R">性能提升</div></a><a class="" href="/about"><div class="Header_icon__SYetk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5f6368" viewBox="0 -960 960 960"><path d="M360-390q-21 0-35.5-14.5T310-440t14.5-35.5T360-490t35.5 14.5T410-440t-14.5 35.5T360-390m240 0q-21 0-35.5-14.5T550-440t14.5-35.5T600-490t35.5 14.5T650-440t-14.5 35.5T600-390M480-160q134 0 227-93t93-227q0-24-3-46.5T786-570q-21 5-42 7.5t-44 2.5q-91 0-172-39T390-708q-32 78-91.5 135.5T160-486v6q0 134 93 227t227 93m0 80q-83 0-156-31.5T197-197t-85.5-127T80-480t31.5-156T197-763t127-85.5T480-880t156 31.5T763-763t85.5 127T880-480t-31.5 156T763-197t-127 85.5T480-80m-54-715q42 70 114 112.5T700-640q14 0 27-1.5t27-3.5q-42-70-114-112.5T480-800q-14 0-27 1.5t-27 3.5M177-581q51-29 89-75t57-103q-51 29-89 75t-57 103m146-178"></path></svg></div><div class="Header_title__BTC6R">关于</div></a></nav></header><div><main><div class="Layout_cover__vC5GW"><div><h1>实现渐变背景的气泡框</h1><p>使用css实现渐变色背景的气泡框</p><div>2024-07-19 12:01:00</div></div></div><div class="content-container"><h1 id="实现渐变背景的气泡框"><a href="#实现渐变背景的气泡框" class="mr-2">#</a>实现渐变背景的气泡框</h1>
<p>传统的气泡框一般使用一个圆角div+三角形来模拟，在背景色为普通颜色时，分别设置背景色即可达到理想的效果。然而将背景色改为渐变色时，分别给两部分元素设置背景色，无法设置出连续的颜色，所以原先的实现方式不适用。</p>
<h2 id="初始方案"><a href="#初始方案" class="mr-2">#</a>初始方案</h2>
<h3 id="实现逻辑"><a href="#实现逻辑" class="mr-2">#</a>实现逻辑</h3>
<ol>
<li>画一个渐变色背景的矩形</li>
<li>使用和背景色一致的颜色遮罩盖住无需展示的部分，模拟三角形和圆角<!-- -->
<ol>
<li>远离箭头的矩形正常设置border-radius</li>
<li>靠近箭头的矩形圆角使用两个遮罩来模拟，使用clip-path的path函数实现</li>
<li>使用clip-path的polygon（多边形）函数截取三角形的反转部分，遮住非三角形的部分。</li>
</ol>
</li>
</ol>
<p>示例代码：</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#b48ead">import</span><span> classNames </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;classnames&quot;</span><span>;
</span><span></span><span style="color:#b48ead">import</span><span> </span><span style="color:#b48ead">type</span><span> { PropsWithChildren } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;react&quot;</span><span>;
</span>
<span></span><span style="color:#b48ead">import</span><span> styles </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;./styles.module.css&quot;</span><span>;
</span>
<span></span><span style="color:#b48ead">type</span><span> ArrowDirection = </span><span style="color:#a3be8c">&quot;left&quot;</span><span> | </span><span style="color:#a3be8c">&quot;right&quot;</span><span>;
</span>
<span></span><span style="color:#b48ead">interface</span><span> SimpleLinearPopoverProps {
</span>  arrowDirection?: ArrowDirection;
<span>  parrentBackground?: </span><span style="color:#d08770">string</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#b48ead">const</span><span> SimpleLinearPopover: React.FC&lt;PropsWithChildren&lt;SimpleLinearPopoverProps&gt;&gt; = </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">{
</span><span class="hljs-function" style="color:#d08770">  arrowDirection = </span><span class="hljs-function" style="color:#a3be8c">&quot;left&quot;</span><span class="hljs-function" style="color:#d08770">,
</span><span class="hljs-function" style="color:#d08770">  parrentBackground = </span><span class="hljs-function" style="color:#a3be8c">&quot;#fff&quot;</span><span class="hljs-function" style="color:#d08770">,
</span><span class="xml" style="color:#bf616a">  children,
</span><span class="hljs-function" style="color:#d08770">}</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>  </span><span style="color:#b48ead">return</span><span> (
</span><span>    </span><span class="xml" style="color:#bf616a">&lt;</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a">
</span><span class="xml" style="color:#bf616a">      </span><span class="xml hljs-attr" style="color:#bf616a">className</span><span class="xml" style="color:#bf616a">=</span><span class="xml" style="color:#a3be8c">{classNames(</span><span class="xml" style="color:#bf616a">
</span><span class="xml" style="color:#bf616a">        </span><span class="xml hljs-attr" style="color:#bf616a">styles</span><span class="xml" style="color:#bf616a">[&quot;</span><span class="xml hljs-attr" style="color:#bf616a">simple-popover-container</span><span class="xml" style="color:#bf616a">&quot;],
</span><span class="xml" style="color:#bf616a">        </span><span class="xml hljs-attr" style="color:#bf616a">styles</span><span class="xml" style="color:#bf616a">[`</span><span class="xml hljs-attr" style="color:#bf616a">simple-popover-container-direction-</span><span class="xml" style="color:#bf616a">${</span><span class="xml hljs-attr" style="color:#bf616a">arrowDirection</span><span class="xml" style="color:#bf616a">}`]
</span><span class="xml" style="color:#bf616a">      )}
</span><span class="xml" style="color:#bf616a">      </span><span class="xml hljs-attr" style="color:#bf616a">style</span><span class="xml" style="color:#bf616a">=</span><span class="xml" style="color:#a3be8c">{{</span><span class="xml" style="color:#bf616a">
</span><span class="xml" style="color:#bf616a">        &quot;</span><span class="xml hljs-attr" style="color:#bf616a">--parent-background-color</span><span class="xml" style="color:#bf616a">&quot;</span><span class="xml hljs-attr" style="color:#bf616a">:</span><span class="xml" style="color:#bf616a"> </span><span class="xml hljs-attr" style="color:#bf616a">parrentBackground</span><span class="xml" style="color:#bf616a">,
</span><span class="xml" style="color:#bf616a">      }}
</span><span class="xml" style="color:#bf616a">    &gt;</span><span class="xml">
</span><span class="xml">      </span><span class="xml" style="color:#bf616a">&lt;</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a"> </span><span class="xml hljs-attr" style="color:#bf616a">className</span><span class="xml" style="color:#bf616a">=</span><span class="xml" style="color:#a3be8c">{styles[</span><span class="xml" style="color:#bf616a">&quot;</span><span class="xml hljs-attr" style="color:#bf616a">simple-popover-content</span><span class="xml" style="color:#bf616a">&quot;]}&gt;</span><span class="xml">{children}</span><span class="xml" style="color:#bf616a">&lt;/</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a">&gt;</span><span class="xml">
</span><span class="xml">      </span><span class="xml" style="color:#bf616a">&lt;</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a"> </span><span class="xml hljs-attr" style="color:#bf616a">className</span><span class="xml" style="color:#bf616a">=</span><span class="xml" style="color:#a3be8c">{styles[</span><span class="xml" style="color:#bf616a">&quot;</span><span class="xml hljs-attr" style="color:#bf616a">simple-popover-arrow</span><span class="xml" style="color:#bf616a">&quot;]}&gt;</span><span class="xml" style="color:#bf616a">&lt;/</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a">&gt;</span><span class="xml">
</span><span class="xml">    </span><span class="xml" style="color:#bf616a">&lt;/</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a">&gt;</span><span>
</span>  );
<!-- -->};
<!-- -->
<span></span><span style="color:#b48ead">export</span><span> </span><span style="color:#b48ead">default</span><span> SimpleLinearPopover;
</span></code></pre>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#bf616a">.simple-popover-container</span><span> {
</span><span>  </span><span style="color:#ebcb8b">position</span><span>: relative;
</span><span>  </span><span style="color:#ebcb8b">width</span><span>: fit-content;
</span><span>  </span><span style="color:#ebcb8b">max-width</span><span>: </span><span style="color:#d08770">100%</span><span>;
</span><span>  </span><span style="color:#ebcb8b">padding</span><span>: </span><span style="color:#d08770">12px</span><span> </span><span style="color:#d08770">24px</span><span> </span><span style="color:#d08770">12px</span><span> </span><span style="color:#d08770">16px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">word-break</span><span>: break-all;
</span><span>  </span><span style="color:#ebcb8b">color</span><span>: </span><span style="color:#d08770">#fff</span><span>;
</span><span>  </span><span style="color:#ebcb8b">background</span><span>: </span><span style="color:#d08770">linear-gradient</span><span>(</span><span style="color:#d08770">137deg</span><span>, </span><span style="color:#d08770">#efe2b7</span><span> </span><span style="color:#d08770">0%</span><span>, </span><span style="color:#d08770">#a4d1b1</span><span> </span><span style="color:#d08770">90%</span><span>);
</span><span>  </span><span style="color:#ebcb8b">border-radius</span><span>: </span><span style="color:#d08770">12px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">white-space</span><span>: pre-wrap;
</span>}
<!-- -->
<span></span><span style="color:#bf616a">.simple-popover-container</span><span style="color:#bf616a">.simple-popover-container-direction-left</span><span> {
</span><span>  </span><span style="color:#ebcb8b">transform</span><span>: </span><span style="color:#d08770">rotateY</span><span>(</span><span style="color:#d08770">180deg</span><span>);
</span>}
<span></span><span style="color:#bf616a">.simple-popover-container</span><span style="color:#bf616a">.simple-popover-container-direction-right</span><span> {
</span><span>  </span><span style="color:#ebcb8b">transform</span><span>: unset;
</span>}
<!-- -->
<span></span><span style="color:#bf616a">.simple-popover-content</span><span> {
</span><span>  </span><span style="color:#ebcb8b">overflow</span><span>: auto;
</span>}
<!-- -->
<span></span><span style="color:#bf616a">.simple-popover-container</span><span style="color:#bf616a">.simple-popover-container-direction-left</span><span>
</span><span>  </span><span style="color:#bf616a">.simple-popover-content</span><span> {
</span><span>  </span><span style="color:#ebcb8b">transform</span><span>: </span><span style="color:#d08770">rotateY</span><span>(</span><span style="color:#d08770">180deg</span><span>);
</span>}
<!-- -->
<span></span><span style="color:#65737e">/* 上圆角 */</span><span>
</span><span></span><span style="color:#bf616a">.simple-popover-container</span><span>:before {
</span>  position: absolute;
<span>  </span><span style="color:#ebcb8b">top</span><span>: -</span><span style="color:#d08770">2px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">right</span><span>: </span><span style="color:#d08770">6px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">content</span><span>: </span><span style="color:#a3be8c">&quot;&quot;</span><span>;
</span><span>  </span><span style="color:#ebcb8b">width</span><span>: </span><span style="color:#d08770">14px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">height</span><span>: </span><span style="color:#d08770">14px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">background</span><span>: </span><span style="color:#d08770">var</span><span>(--parent-background-color);
</span><span>  </span><span style="color:#ebcb8b">clip-path</span><span>: </span><span style="color:#d08770">path</span><span>(</span><span style="color:#a3be8c">&quot;M 0 0 L 0 2 A 12 12 0 0 1 12 14 L 14 14 L 14 0 0 0 Z&quot;</span><span>);
</span>}
<!-- -->
<span></span><span style="color:#65737e">/* 下圆角 */</span><span>
</span><span></span><span style="color:#bf616a">.simple-popover-container</span><span>:after {
</span>  position: absolute;
<span>  </span><span style="color:#ebcb8b">bottom</span><span>: -</span><span style="color:#d08770">2px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">right</span><span>: </span><span style="color:#d08770">6px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">content</span><span>: </span><span style="color:#a3be8c">&quot;&quot;</span><span>;
</span><span>  </span><span style="color:#ebcb8b">width</span><span>: </span><span style="color:#d08770">14px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">height</span><span>: </span><span style="color:#d08770">14px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">background</span><span>: </span><span style="color:#d08770">var</span><span>(--parent-background-color);
</span><span>  </span><span style="color:#ebcb8b">clip-path</span><span>: </span><span style="color:#d08770">path</span><span>(</span><span style="color:#a3be8c">&quot;M 14 0 L 12 0 A 12 12 0 0 1 0 12 L 0 14 L 14 14 14 0 Z&quot;</span><span>);
</span>}
<!-- -->
<span></span><span style="color:#65737e">/* 箭头 */</span><span>
</span><span></span><span style="color:#bf616a">.simple-popover-arrow</span><span>:after {
</span>  position: absolute;
<span>  </span><span style="color:#ebcb8b">top</span><span>: </span><span style="color:#d08770">0</span><span>;
</span><span>  </span><span style="color:#ebcb8b">right</span><span>: -</span><span style="color:#d08770">2px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">content</span><span>: </span><span style="color:#a3be8c">&quot;&quot;</span><span>;
</span><span>  </span><span style="color:#ebcb8b">width</span><span>: </span><span style="color:#d08770">10px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">height</span><span>: </span><span style="color:#d08770">100%</span><span>;
</span><span>  </span><span style="color:#ebcb8b">background</span><span>: </span><span style="color:#d08770">var</span><span>(--parent-background-color);
</span><span>  </span><span style="color:#ebcb8b">clip-path</span><span>: </span><span style="color:#d08770">polygon</span><span>(
</span><span>    </span><span style="color:#d08770">100%</span><span> </span><span style="color:#d08770">0</span><span>,
</span><span>    </span><span style="color:#d08770">0</span><span> </span><span style="color:#d08770">0</span><span>,
</span><span>    </span><span style="color:#d08770">0</span><span> </span><span style="color:#d08770">12px</span><span>,
</span><span>    </span><span style="color:#d08770">8px</span><span> </span><span style="color:#d08770">21px</span><span>,
</span><span>    </span><span style="color:#d08770">0</span><span> </span><span style="color:#d08770">30px</span><span>,
</span><span>    </span><span style="color:#d08770">0</span><span> </span><span style="color:#d08770">100%</span><span>,
</span><span>    </span><span style="color:#d08770">100%</span><span> </span><span style="color:#d08770">100%</span><span>,
</span><span>    </span><span style="color:#d08770">100%</span><span> </span><span style="color:#d08770">21px</span><span>
</span>  );
<!-- -->}
</code></pre>
<p>效果如下：</p>
<div style="margin-bottom:16px"><div class="styles_simple-popover-container__WV0eY styles_simple-popover-container-direction-left__x0cV6" style="--parent-background-color:#FFF9ED"><div class="styles_simple-popover-content__yV7rc">hello!</div><div class="styles_simple-popover-arrow__iiroC"></div></div></div>
<div class="styles_simple-popover-container__WV0eY styles_simple-popover-container-direction-right__8Tgnx" style="--parent-background-color:#FFF9ED"><div class="styles_simple-popover-content__yV7rc">hello!</div><div class="styles_simple-popover-arrow__iiroC"></div></div>
<br/>
<h3 id="局限"><a href="#局限" class="mr-2">#</a>局限</h3>
<p>只能适用于背景色为纯色的场景，对背景为图片或带透明叠加效果的场景不适用</p>
<h2 id="改良方案"><a href="#改良方案" class="mr-2">#</a>改良方案</h2>
<p>仅用一个div+clip-path，将气泡框描绘出来，由于path函数中只能声明固定坐标点而不能用百分比，而气泡框的宽高需要根据内容自适应，因此需要监听div的大小变化，计算出path的路径。</p>
<p>示例代码：</p>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span style="color:#b48ead">import</span><span> classNames </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;classnames&quot;</span><span>;
</span><span></span><span style="color:#b48ead">import</span><span> { PropsWithChildren, useLayoutEffect, useRef, useState } </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;react&quot;</span><span>;
</span><span></span><span style="color:#b48ead">import</span><span> styles </span><span style="color:#b48ead">from</span><span> </span><span style="color:#a3be8c">&quot;./styles.module.css&quot;</span><span>;
</span>
<span></span><span style="color:#b48ead">type</span><span> ArrowDirection = </span><span style="color:#a3be8c">&quot;left&quot;</span><span> | </span><span style="color:#a3be8c">&quot;right&quot;</span><span>;
</span>
<span></span><span style="color:#b48ead">interface</span><span> LinearPopoverProps {
</span>  arrowDirection?: ArrowDirection;
<!-- -->}
<!-- -->
<span></span><span style="color:#b48ead">const</span><span> LinearPopover: React.FC&lt;PropsWithChildren&lt;LinearPopoverProps&gt;&gt; = </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">{
</span><span class="hljs-function" style="color:#d08770">  arrowDirection = </span><span class="hljs-function" style="color:#a3be8c">&quot;left&quot;</span><span class="hljs-function" style="color:#d08770">,
</span><span class="hljs-subst" style="color:#a3be8c">  children,
</span><span class="hljs-function" style="color:#d08770">}</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>  </span><span style="color:#b48ead">const</span><span> containerRef = useRef&lt;HTMLDivElement&gt;(</span><span style="color:#d08770">null</span><span>);
</span>
<span>  useLayoutEffect(</span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#b48ead">if</span><span> (containerRef.current) {
</span><span>      </span><span style="color:#b48ead">const</span><span> resizeObserver = </span><span style="color:#b48ead">new</span><span> ResizeObserver(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">entries</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        </span><span style="color:#b48ead">for</span><span> (</span><span style="color:#b48ead">const</span><span> entry </span><span style="color:#b48ead">of</span><span> entries) {
</span><span>          </span><span style="color:#b48ead">if</span><span> (entry.contentRect) {
</span><span>            </span><span style="color:#b48ead">const</span><span> { width, height } = entry.target.getBoundingClientRect();
</span><span>            </span><span style="color:#b48ead">const</span><span> path = genPopoverPath(width, height);
</span><span>            containerRef.current!.style[</span><span style="color:#a3be8c">&quot;clip-path&quot;</span><span>] = </span><span style="color:#a3be8c">`path(&#x27;</span><span class="hljs-subst" style="color:#a3be8c">${path}</span><span style="color:#a3be8c">&#x27;)`</span><span>;
</span>          }
<!-- -->        }
<!-- -->      });
<!-- -->      resizeObserver.observe(containerRef.current);
<span>      </span><span style="color:#b48ead">return</span><span> </span><span class="hljs-function">() =&gt;</span><span> {
</span>        resizeObserver.disconnect();
<!-- -->      };
<!-- -->    }
<!-- -->  }, []);
<!-- -->
<span>  </span><span style="color:#b48ead">return</span><span> (
</span><span>    </span><span class="xml" style="color:#bf616a">&lt;</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a">
</span><span class="xml" style="color:#bf616a">      </span><span class="xml hljs-attr" style="color:#bf616a">ref</span><span class="xml" style="color:#bf616a">=</span><span class="xml" style="color:#a3be8c">{containerRef}</span><span class="xml" style="color:#bf616a">
</span><span class="xml" style="color:#bf616a">      </span><span class="xml hljs-attr" style="color:#bf616a">className</span><span class="xml" style="color:#bf616a">=</span><span class="xml" style="color:#a3be8c">{classNames(</span><span class="xml" style="color:#bf616a">
</span><span class="xml" style="color:#bf616a">        </span><span class="xml hljs-attr" style="color:#bf616a">styles</span><span class="xml" style="color:#bf616a">[&quot;</span><span class="xml hljs-attr" style="color:#bf616a">popover-container</span><span class="xml" style="color:#bf616a">&quot;],
</span><span class="xml" style="color:#bf616a">        </span><span class="xml hljs-attr" style="color:#bf616a">styles</span><span class="xml" style="color:#bf616a">[`</span><span class="xml hljs-attr" style="color:#bf616a">popover-container-direction-</span><span class="xml" style="color:#bf616a">${</span><span class="xml hljs-attr" style="color:#bf616a">arrowDirection</span><span class="xml" style="color:#bf616a">}`]
</span><span class="hljs-subst" style="color:#a3be8c">      )}
</span><span class="xml" style="color:#bf616a">    &gt;</span><span class="xml">
</span><span class="xml">      </span><span class="xml" style="color:#bf616a">&lt;</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a"> </span><span class="xml hljs-attr" style="color:#bf616a">className</span><span class="xml" style="color:#bf616a">=</span><span class="xml" style="color:#a3be8c">&quot;popover-container-content&quot;</span><span class="xml" style="color:#bf616a">&gt;</span><span class="xml">{children}</span><span class="xml" style="color:#bf616a">&lt;/</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a">&gt;</span><span class="xml">
</span><span class="xml">    </span><span class="xml" style="color:#bf616a">&lt;/</span><span class="xml" style="color:#bf616a">div</span><span class="xml" style="color:#bf616a">&gt;</span><span>
</span>  );
<!-- -->};
<!-- -->
<span></span><span class="hljs-function" style="color:#b48ead">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#8fa1b3">genPopoverPath</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#d08770">width: </span><span class="hljs-function" style="color:#d08770">number</span><span class="hljs-function" style="color:#d08770">, height: </span><span class="hljs-function" style="color:#d08770">number</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#b48ead">const</span><span> borderRadius = </span><span style="color:#d08770">12</span><span>;
</span><span>  </span><span style="color:#b48ead">const</span><span> arrowWidth = </span><span style="color:#d08770">10</span><span>;
</span><span>  </span><span style="color:#b48ead">const</span><span> path = </span><span style="color:#a3be8c">`M 0 </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c">
</span><span style="color:#a3be8c">   A </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> 0 0 1 </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> 0 
</span><span style="color:#a3be8c">   L </span><span class="hljs-subst" style="color:#a3be8c">${width - borderRadius - arrowWidth}</span><span style="color:#a3be8c"> 0 
</span><span style="color:#a3be8c">   A </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> 0 0 1 </span><span class="hljs-subst" style="color:#a3be8c">${
</span><span class="hljs-subst" style="color:#a3be8c">    width - arrowWidth
</span><span class="hljs-subst" style="color:#a3be8c">  }</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> 
</span><span style="color:#a3be8c">   L  </span><span class="hljs-subst" style="color:#a3be8c">${width - arrowWidth}</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> 
</span><span style="color:#a3be8c">   L </span><span class="hljs-subst" style="color:#a3be8c">${width}</span><span style="color:#a3be8c"> 21 
</span><span style="color:#a3be8c">   L </span><span class="hljs-subst" style="color:#a3be8c">${width - arrowWidth}</span><span style="color:#a3be8c"> 30 
</span><span style="color:#a3be8c">   L </span><span class="hljs-subst" style="color:#a3be8c">${width - arrowWidth}</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${height - borderRadius}</span><span style="color:#a3be8c"> 
</span><span style="color:#a3be8c">   A </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> 0 0 1 </span><span class="hljs-subst" style="color:#a3be8c">${
</span><span class="hljs-subst" style="color:#a3be8c">    width - borderRadius - arrowWidth
</span><span class="hljs-subst" style="color:#a3be8c">  }</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${height}</span><span style="color:#a3be8c"> 
</span><span style="color:#a3be8c">   L </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${height}</span><span style="color:#a3be8c">  
</span><span style="color:#a3be8c">   A </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> 0 0 1 0 </span><span class="hljs-subst" style="color:#a3be8c">${height - borderRadius}</span><span style="color:#a3be8c">
</span><span style="color:#a3be8c">   L 0 </span><span class="hljs-subst" style="color:#a3be8c">${borderRadius}</span><span style="color:#a3be8c"> Z`</span><span>;
</span>
<span>  </span><span style="color:#b48ead">return</span><span> path.replaceAll(</span><span style="color:#a3be8c">&quot;\n&quot;</span><span>, </span><span style="color:#a3be8c">&quot;&quot;</span><span>);
</span>}
<!-- -->
<span></span><span style="color:#b48ead">export</span><span> </span><span style="color:#b48ead">default</span><span> LinearPopover;
</span></code></pre>
<pre style="display:block;overflow-x:auto;background:#2b303b;color:#c0c5ce;padding:0.5em"><code class="block-code" style="white-space:pre"><span>
</span><span></span><span style="color:#bf616a">.popover-container</span><span> {
</span><span>  </span><span style="color:#ebcb8b">position</span><span>: relative;
</span><span>  </span><span style="color:#ebcb8b">width</span><span>: fit-content;
</span><span>  </span><span style="color:#ebcb8b">max-width</span><span>: </span><span style="color:#d08770">100%</span><span>;
</span><span>  </span><span style="color:#ebcb8b">padding</span><span>: </span><span style="color:#d08770">12px</span><span> </span><span style="color:#d08770">24px</span><span> </span><span style="color:#d08770">12px</span><span> </span><span style="color:#d08770">16px</span><span>;
</span><span>  </span><span style="color:#ebcb8b">word-break</span><span>: break-all;
</span><span>  </span><span style="color:#ebcb8b">color</span><span>: </span><span style="color:#d08770">#fff</span><span>;
</span><span>  </span><span style="color:#ebcb8b">background</span><span>: </span><span style="color:#d08770">linear-gradient</span><span>(</span><span style="color:#d08770">137deg</span><span>, </span><span style="color:#d08770">#efe2b7</span><span> </span><span style="color:#d08770">0%</span><span>, </span><span style="color:#d08770">#a4d1b1</span><span> </span><span style="color:#d08770">90%</span><span>);
</span><span>  </span><span style="color:#ebcb8b">white-space</span><span>: pre-wrap;
</span>}
<!-- -->
<span></span><span style="color:#bf616a">.popover-container</span><span style="color:#bf616a">.popover-container-direction-right</span><span> {
</span><span>  </span><span style="color:#ebcb8b">transform</span><span>: </span><span style="color:#d08770">rotateY</span><span>(</span><span style="color:#d08770">180deg</span><span>);
</span>}
<span></span><span style="color:#bf616a">.popover-container</span><span style="color:#bf616a">.popover-container-direction-right</span><span>
</span><span>  </span><span style="color:#bf616a">.popover-container-content</span><span> {
</span><span>  </span><span style="color:#ebcb8b">transform</span><span>: </span><span style="color:#d08770">rotateY</span><span>(</span><span style="color:#d08770">180deg</span><span>);
</span>}
</code></pre>
<p>效果如下：</p>
<div style="margin-bottom:16px"><div class="styles_popover-container__H0fAE"><div class="styles_popover-container-content__eNs_j">hello!</div></div></div>
<div class="styles_popover-container__H0fAE styles_popover-container-direction-right__D9rQ3"><div class="styles_popover-container-content__eNs_j">hello!</div></div>
<br/>
<h2 id="参考资料"><a href="#参考资料" class="mr-2">#</a>参考资料</h2>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/d#%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF">path椭圆曲线</a></p><div class="styles_catalogue-container__i6Zhk"><div class="styles_skeleton-container__qbEBJ"><div class="styles_skeleton__p5JvS" data-level="2"></div><div class="styles_skeleton__p5JvS" data-level="3"></div><div class="styles_skeleton__p5JvS" data-level="3"></div><div class="styles_skeleton__p5JvS" data-level="2"></div><div class="styles_skeleton__p5JvS" data-level="2"></div></div><nav class="styles_navigation__NkDRt"><ul><li class="" data-level="2"><a href="#初始方案">初始方案</a></li><li class="" data-level="3"><a href="#实现逻辑">实现逻辑</a></li><li class="" data-level="3"><a href="#局限">局限</a></li><li class="" data-level="2"><a href="#改良方案">改良方案</a></li><li class="" data-level="2"><a href="#参考资料">参考资料</a></li></ul></nav></div></div><div class="content-container"></div></main><footer class="grid place-items-center pb-4"><a href="https://github.com/hmilin" target="_blank" rel="noreferrer noopener">😘Github</a></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    h2: \"h2\",\n    h3: \"h3\",\n    ol: \"ol\",\n    li: \"li\",\n    pre: \"pre\",\n    code: \"code\",\n    a: \"a\"\n  }, _provideComponents(), props.components), {SimpleLinearPopover, LinearPopover} = _components;\n  if (!LinearPopover) _missingMdxReference(\"LinearPopover\", true);\n  if (!SimpleLinearPopover) _missingMdxReference(\"SimpleLinearPopover\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"实现渐变背景的气泡框\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"传统的气泡框一般使用一个圆角div+三角形来模拟，在背景色为普通颜色时，分别设置背景色即可达到理想的效果。然而将背景色改为渐变色时，分别给两部分元素设置背景色，无法设置出连续的颜色，所以原先的实现方式不适用。\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"初始方案\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"实现逻辑\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"画一个渐变色背景的矩形\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"使用和背景色一致的颜色遮罩盖住无需展示的部分，模拟三角形和圆角\", \"\\n\", _jsxs(_components.ol, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: \"远离箭头的矩形正常设置border-radius\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"靠近箭头的矩形圆角使用两个遮罩来模拟，使用clip-path的path函数实现\"\n          }), \"\\n\", _jsx(_components.li, {\n            children: \"使用clip-path的polygon（多边形）函数截取三角形的反转部分，遮住非三角形的部分。\"\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"示例代码：\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"import classNames from \\\"classnames\\\";\\nimport type { PropsWithChildren } from \\\"react\\\";\\n\\nimport styles from \\\"./styles.module.css\\\";\\n\\ntype ArrowDirection = \\\"left\\\" | \\\"right\\\";\\n\\ninterface SimpleLinearPopoverProps {\\n  arrowDirection?: ArrowDirection;\\n  parrentBackground?: string;\\n}\\n\\nconst SimpleLinearPopover: React.FC\u003cPropsWithChildren\u003cSimpleLinearPopoverProps\u003e\u003e = ({\\n  arrowDirection = \\\"left\\\",\\n  parrentBackground = \\\"#fff\\\",\\n  children,\\n}) =\u003e {\\n  return (\\n    \u003cdiv\\n      className={classNames(\\n        styles[\\\"simple-popover-container\\\"],\\n        styles[`simple-popover-container-direction-${arrowDirection}`]\\n      )}\\n      style={{\\n        \\\"--parent-background-color\\\": parrentBackground,\\n      }}\\n    \u003e\\n      \u003cdiv className={styles[\\\"simple-popover-content\\\"]}\u003e{children}\u003c/div\u003e\\n      \u003cdiv className={styles[\\\"simple-popover-arrow\\\"]}\u003e\u003c/div\u003e\\n    \u003c/div\u003e\\n  );\\n};\\n\\nexport default SimpleLinearPopover;\\n\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-css\",\n        children: \".simple-popover-container {\\n  position: relative;\\n  width: fit-content;\\n  max-width: 100%;\\n  padding: 12px 24px 12px 16px;\\n  word-break: break-all;\\n  color: #fff;\\n  background: linear-gradient(137deg, #efe2b7 0%, #a4d1b1 90%);\\n  border-radius: 12px;\\n  white-space: pre-wrap;\\n}\\n\\n.simple-popover-container.simple-popover-container-direction-left {\\n  transform: rotateY(180deg);\\n}\\n.simple-popover-container.simple-popover-container-direction-right {\\n  transform: unset;\\n}\\n\\n.simple-popover-content {\\n  overflow: auto;\\n}\\n\\n.simple-popover-container.simple-popover-container-direction-left\\n  .simple-popover-content {\\n  transform: rotateY(180deg);\\n}\\n\\n/* 上圆角 */\\n.simple-popover-container:before {\\n  position: absolute;\\n  top: -2px;\\n  right: 6px;\\n  content: \\\"\\\";\\n  width: 14px;\\n  height: 14px;\\n  background: var(--parent-background-color);\\n  clip-path: path(\\\"M 0 0 L 0 2 A 12 12 0 0 1 12 14 L 14 14 L 14 0 0 0 Z\\\");\\n}\\n\\n/* 下圆角 */\\n.simple-popover-container:after {\\n  position: absolute;\\n  bottom: -2px;\\n  right: 6px;\\n  content: \\\"\\\";\\n  width: 14px;\\n  height: 14px;\\n  background: var(--parent-background-color);\\n  clip-path: path(\\\"M 14 0 L 12 0 A 12 12 0 0 1 0 12 L 0 14 L 14 14 14 0 Z\\\");\\n}\\n\\n/* 箭头 */\\n.simple-popover-arrow:after {\\n  position: absolute;\\n  top: 0;\\n  right: -2px;\\n  content: \\\"\\\";\\n  width: 10px;\\n  height: 100%;\\n  background: var(--parent-background-color);\\n  clip-path: polygon(\\n    100% 0,\\n    0 0,\\n    0 12px,\\n    8px 21px,\\n    0 30px,\\n    0 100%,\\n    100% 100%,\\n    100% 21px\\n  );\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"效果如下：\"\n    }), \"\\n\", _jsx(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: _jsx(SimpleLinearPopover, {\n        parrentBackground: \"#FFF9ED\",\n        children: \"hello!\"\n      })\n    }), \"\\n\", _jsx(SimpleLinearPopover, {\n      parrentBackground: \"#FFF9ED\",\n      arrowDirection: \"right\",\n      children: \"hello!\"\n    }), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsx(_components.h3, {\n      children: \"局限\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"只能适用于背景色为纯色的场景，对背景为图片或带透明叠加效果的场景不适用\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"改良方案\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"仅用一个div+clip-path，将气泡框描绘出来，由于path函数中只能声明固定坐标点而不能用百分比，而气泡框的宽高需要根据内容自适应，因此需要监听div的大小变化，计算出path的路径。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"示例代码：\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-typescript\",\n        children: \"import classNames from \\\"classnames\\\";\\nimport { PropsWithChildren, useLayoutEffect, useRef, useState } from \\\"react\\\";\\nimport styles from \\\"./styles.module.css\\\";\\n\\ntype ArrowDirection = \\\"left\\\" | \\\"right\\\";\\n\\ninterface LinearPopoverProps {\\n  arrowDirection?: ArrowDirection;\\n}\\n\\nconst LinearPopover: React.FC\u003cPropsWithChildren\u003cLinearPopoverProps\u003e\u003e = ({\\n  arrowDirection = \\\"left\\\",\\n  children,\\n}) =\u003e {\\n  const containerRef = useRef\u003cHTMLDivElement\u003e(null);\\n\\n  useLayoutEffect(() =\u003e {\\n    if (containerRef.current) {\\n      const resizeObserver = new ResizeObserver((entries) =\u003e {\\n        for (const entry of entries) {\\n          if (entry.contentRect) {\\n            const { width, height } = entry.target.getBoundingClientRect();\\n            const path = genPopoverPath(width, height);\\n            containerRef.current!.style[\\\"clip-path\\\"] = `path('${path}')`;\\n          }\\n        }\\n      });\\n      resizeObserver.observe(containerRef.current);\\n      return () =\u003e {\\n        resizeObserver.disconnect();\\n      };\\n    }\\n  }, []);\\n\\n  return (\\n    \u003cdiv\\n      ref={containerRef}\\n      className={classNames(\\n        styles[\\\"popover-container\\\"],\\n        styles[`popover-container-direction-${arrowDirection}`]\\n      )}\\n    \u003e\\n      \u003cdiv className=\\\"popover-container-content\\\"\u003e{children}\u003c/div\u003e\\n    \u003c/div\u003e\\n  );\\n};\\n\\nfunction genPopoverPath(width: number, height: number) {\\n  const borderRadius = 12;\\n  const arrowWidth = 10;\\n  const path = `M 0 ${borderRadius}\\n   A ${borderRadius} ${borderRadius} 0 0 1 ${borderRadius} 0 \\n   L ${width - borderRadius - arrowWidth} 0 \\n   A ${borderRadius} ${borderRadius} 0 0 1 ${\\n    width - arrowWidth\\n  } ${borderRadius} \\n   L  ${width - arrowWidth} ${borderRadius} \\n   L ${width} 21 \\n   L ${width - arrowWidth} 30 \\n   L ${width - arrowWidth} ${height - borderRadius} \\n   A ${borderRadius} ${borderRadius} 0 0 1 ${\\n    width - borderRadius - arrowWidth\\n  } ${height} \\n   L ${borderRadius} ${height}  \\n   A ${borderRadius} ${borderRadius} 0 0 1 0 ${height - borderRadius}\\n   L 0 ${borderRadius} Z`;\\n\\n  return path.replaceAll(\\\"\\\\n\\\", \\\"\\\");\\n}\\n\\nexport default LinearPopover;\\n\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-css\",\n        children: \"\\n.popover-container {\\n  position: relative;\\n  width: fit-content;\\n  max-width: 100%;\\n  padding: 12px 24px 12px 16px;\\n  word-break: break-all;\\n  color: #fff;\\n  background: linear-gradient(137deg, #efe2b7 0%, #a4d1b1 90%);\\n  white-space: pre-wrap;\\n}\\n\\n.popover-container.popover-container-direction-right {\\n  transform: rotateY(180deg);\\n}\\n.popover-container.popover-container-direction-right\\n  .popover-container-content {\\n  transform: rotateY(180deg);\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"效果如下：\"\n    }), \"\\n\", _jsx(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: _jsx(LinearPopover, {\n        children: \"hello!\"\n      })\n    }), \"\\n\", _jsx(LinearPopover, {\n      arrowDirection: \"right\",\n      children: \"hello!\"\n    }), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsx(_components.h2, {\n      children: \"参考资料\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/d#%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF\",\n        children: \"path椭圆曲线\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{"title":"实现渐变背景的气泡框","description":"使用css实现渐变色背景的气泡框","public":true,"date":"2024-07-19 12:01:00","category":"native"}},"frontMatter":{"title":"实现渐变背景的气泡框","description":"使用css实现渐变色背景的气泡框","public":true,"date":"2024-07-19 12:01:00","category":"native"},"headings":[{"depth":2,"text":"初始方案"},{"depth":3,"text":"实现逻辑"},{"depth":3,"text":"局限"},{"depth":2,"text":"改良方案"},{"depth":2,"text":"参考资料"}]},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"linearbg-popover"},"buildId":"Cbc3P-QolF0TorJreHJzQ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>